<!DOCTYPE html>
<html><head>
  <title>TamWiki | Technology / TimecopRubyGem</title>
  <link rel='stylesheet' href='http://wiki.tamouse.org/pub/skins/print/print.css' type='text/css' />
</head>
<body>
<!--PageText-->
<div id='wikitext'>
<div  style='display: none;' > 
<p>Summary:A gem providing "time travel" and "time freezing" capabilities, making it dead simple to test time-dependent code. It provides a unified method to mock Time.now, Date.today, and <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=Technology.DateTime?action=edit'>DateTime</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=Technology.DateTime?action=edit'>?</a></span>.now in a single call.
Parent:(Technology.)Ruby
<span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=Technology.IncludeMe?action=edit'>IncludeMe</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=Technology.IncludeMe?action=edit'>?</a></span>:<a class='wikilink' href='http://wiki.tamouse.org?n=Technology.Ruby?action=print'>Ruby</a>
Categories:<a class='categorylink' href='http://wiki.tamouse.org?n=Category.Articles'>Articles</a>, <a class='categorylink' href='http://wiki.tamouse.org?n=Category.HowTos'>HowTos</a>
Tags: ruby, gem, testing, time
</p></div>
<p class='vspace'><a name='excerpt' id='excerpt'></a>
</p><div class='round lrindent nutshell' > 
<p  style='text-align: center;'><span style='font-size:120%'> <strong><em>Incomplete</em></strong> </span>
</p></div>
<p class='vspace'><a class='external' href='https://github.com/travisjeffery/timecop' target='_blank'>Timecop</a> is a nifty ruby gem that is a great aid in testing code that is time-dependent. You can set the time a test will think it's running at, or freeze time to a certain point.
<a name='excerptend' id='excerptend'></a>
</p>
<div class='vspace'></div><h2>Links:</h2>
<ul><li><a class='external' href='https://github.com/travisjeffery/timecop' target='_blank'>Github repo for Timecop</a>
</li><li><a class='external' href='http://blog.smartlogicsolutions.com/2008/11/19/timecop-freeze-time-in-ruby-for-better-testing/' target='_blank'>Blog post announcing Timecop with some usage info</a>
</li><li><a class='external' href='https://github.com/travisjeffery/timecop/blob/master/README.markdown' target='_blank'>Timecop README page</a>
</li><li><a class='external' href='http://johntrupiano.rubyforge.org/timecop/' target='_blank'>Timecop rdoc</a>
</li></ul><div class='vspace'></div><h2>Basic usage</h2>

<div class='sourceblock ' id='sourceblock1'>
  <div class='sourceblocktext'><div class="ruby"><div class="head">spec test</div><ol><li class="li1"><div class="de1"><span class="kw3">require</span> <span class="st0">'spec_helper'</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">describe <span class="st0">&quot;Time&quot;</span> <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp; context <span class="st0">&quot;now&quot;</span> <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; it <span class="st0">&quot;should report the current time&quot;</span> <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="kw4">Time</span>.<span class="me1">now</span>.<span class="me1">should</span> == Chronic.<span class="me1">parse</span><span class="br0">&#40;</span><span class="st0">&quot;now&quot;</span><span class="br0">&#41;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">end</span></div></li>
<li class="li1"><div class="de1">&nbsp; <span class="kw1">end</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; context <span class="st0">&quot;future&quot;</span> <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; before <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; Timecop.<span class="me1">travel</span><span class="br0">&#40;</span><span class="nu0">1</span>.<span class="me1">week</span><span class="br0">&#41;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">end</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; after <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; Timecop.<span class="kw2">return</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">end</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; it <span class="st0">&quot;should report the time a week from now&quot;</span> <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="kw4">Time</span>.<span class="me1">now</span>.<span class="me1">should</span> == Chronic.<span class="me1">parse</span><span class="br0">&#40;</span><span class="st0">&quot;next week&quot;</span><span class="br0">&#41;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">end</span></div></li>
<li class="li1"><div class="de1">&nbsp; <span class="kw1">end</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">end</span></div></li>
</ol></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.TimecopRubyGem?action=sourceblock&amp;num=1' type='text/plain'>raw code</a></div>
</div>

<div class='vspace'></div><h2>Using Timecop with Chronic</h2>
<p>Timecop, in combination with <a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=Technology.ChronicRubyGem?action=edit'>Chronic</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=Technology.ChronicRubyGem?action=edit'>?</a> makes for some dandy testing ability:
</p>
<div class='vspace'></div>
<div class='sourceblock ' id='sourceblock2'>
  <div class='sourceblocktext'><div class="ruby"><div class="head">Using Timecop with Chronic</div><ol><li class="li1"><div class="de1">Timecop.<span class="me1">travel</span><span class="br0">&#40;</span>Chronic.<span class="me1">parse</span><span class="br0">&#40;</span><span class="st0">'this tuesday 5:00'</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; <span class="co1"># test-fu</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">end</span></div></li>
</ol></div></div>
  <div class='sourceblocklink'></div>
</div>

<div class='vspace'></div>
</div>

</body>
</html>
