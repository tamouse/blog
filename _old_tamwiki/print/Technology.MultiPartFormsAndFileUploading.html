<!DOCTYPE html>
<html><head>
  <title>TamWiki | Technology / MultiPartFormsAndFileUploading</title>
  <link rel='stylesheet' href='http://wiki.tamouse.org/pub/skins/print/print.css' type='text/css' />
</head>
<body>
<!--PageText-->
<div id='wikitext'>

<div class='sourceblock ' id='sourceblock1'>
  <div class='sourceblocktext'><div class="email"><span class="sc0"><span class="kw3">From</span><span class="sy0">:</span> &nbsp; <span class="re2">owner-monkeyjunkies@wired.com</span> on behalf of Tamara Temple</span><br />
<span class="sc0">Sent<span class="sy0">:</span> &nbsp; Thursday, November 26, 1998 3<span class="sy0">:</span>11 AM </span><br />
<span class="sc0"><span class="kw3">To</span><span class="sy0">:</span> &nbsp; &nbsp; <span class="re2">monkeyjunkies@wired.com</span></span><br />
<span class="sc0"><span class="kw3">Subject</span><span class="sy0">:</span>&nbsp; &nbsp; &nbsp; &nbsp; RE<span class="sy0">:</span> <span class="sy0">[</span>mj<span class="sy0">]</span> CGI.pm Multi-Part Forms, sendmail attachments</span><br />
<br />
<span class="sc0"> <span class="sy0">&gt;</span> 'Gotta' agree <span class="kw4">with</span> Alan `McCoy's <span class="sy0">&lt;</span>objunky<span class="sy0">&gt;</span> regarding CGI.pm!</span><br />
<br />
me too me too!<br />
<br />
&nbsp;&gt; I've got a form set up just fine, but i'd also like to allow the user<br />
&nbsp;&gt; to upload a file that would ideally be sent along as an attachment<br />
&nbsp;&gt; with the sendmail portion of the script i'm using on the page.<br />
<br />
umm -- isn't this explained in the CGI.pm Pod? &nbsp;'Creating a File Upload<br />
Field' describes how to do this:<br />
<br />
<br />
&nbsp; print $q-&gt;start_multipart_form(),<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $q-&gt;filefield(-name='uploadfile',-size='50'),<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $q-&gt;endform;<br />
<br />
<br />
and you process the file. If you're expecting binary (or you don't know what<br />
to expect), then process the file using binary reads:<br />
<br />
<br />
&nbsp; $filename = $q-&gt;param('uploadfile');<br />
&nbsp; open OUT '&gt;/tmp/safe/place/to/store/files.bin';<br />
&nbsp; while ($bytesrd=read($filename,$buffer,1024)) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print OUT $buffer;<br />
&nbsp; }<br />
&nbsp; close OUT;<br />
<br />
<br />
and now you can continue to futz with the file all you want.</div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.MultiPartFormsAndFileUploading?action=sourceblock&amp;num=1' type='text/plain'>raw code</a></div>
</div>

<div class='vspace'></div>
</div>

</body>
</html>
