<!DOCTYPE html>
<html><head>
  <title>TamWiki | Technology / How-To: Install Ruby from Source on a New System</title>
  <link rel='stylesheet' href='http://wiki.tamouse.org/pub/skins/print/print.css' type='text/css' />
</head>
<body>
<!--PageText-->
<div id='wikitext'>
<p><a name='excerpt' id='excerpt'></a>
Installing <a class='wikilink' href='http://wiki.tamouse.org?n=Technology.Ruby?action=print'>Ruby</a> can be difficult sometimes. With the number of
different operating system distributions, number of versions, and
possible local configurations, it is hard to make a one-stop install
that fits every user's need.
</p>
<p class='vspace'>The primary resource for installing <a class='wikilink' href='http://wiki.tamouse.org?n=Technology.Ruby?action=print'>Ruby</a> remains the
<a class='external' href='http://www.ruby-lang.org/en/downloads/' target='_blank'>download page</a> on the
<a class='external' href='http://www.ruby-lang.org' target='_blank'>ruby-lang</a> site itself.
</p>
<p class='vspace'>If you can, you should first try to install <a class='wikilink' href='http://wiki.tamouse.org?n=Technology.Ruby?action=print'>Ruby</a> using tools such
as <a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=Technology.Rvm?action=edit'>rvm</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=Technology.Rvm?action=edit'>?</a>, <a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=Technology.Rbenv?action=edit'>rbenv</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=Technology.Rbenv?action=edit'>?</a>, <a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=Technology.Ruby-build?action=edit'>ruby-build</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=Technology.Ruby-build?action=edit'>?</a>, and so on.
</p>
<p class='vspace'>These represent the minimal set of steps to install <a class='wikilink' href='http://wiki.tamouse.org?n=Technology.Ruby?action=print'>Ruby</a> on a
<a class='wikilink' href='http://wiki.tamouse.org?n=Technology.Linux?action=print'>Linux</a> system from the source. To install <a class='wikilink' href='http://wiki.tamouse.org?n=Technology.Ruby?action=print'>Ruby</a> from on a Mac,
use <a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=Technology.HomeBrew?action=edit'>HomeBrew</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=Technology.HomeBrew?action=edit'>?</a>. To install <a class='wikilink' href='http://wiki.tamouse.org?n=Technology.Ruby?action=print'>Ruby</a> on <a class='wikilink' href='http://wiki.tamouse.org?n=Technology.Windows?action=print'>Windows</a>, please see
<a class='external' href='http://rubyinstaller.org/' target='_blank'>RubyInstaller</a>.
<a name='excerptend' id='excerptend'></a>
</p>
<div class='vspace'></div><h2>Install your favourite distribution</h2>
<p>These instructions work for any <a class='external' href='http://debian.org' target='_blank'>Debian-based</a>
linux system, as well as some others.
</p>
<p class='vspace'>The Debian system installer, <a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=Technology.Apt?action=edit'>apt</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=Technology.Apt?action=edit'>?</a>, is assumed here. Other linux
distributions have different installers, and potentially other package
names.
</p>
<div class='vspace'></div><h2>Log in as root</h2>

<div class='sourceblock ' id='sourceblock1'>
  <div class='sourceblocktext'><div class="bash">$ <span class="kw2">sudo</span> <span class="re5">-i</span><br />
Password: <span class="co0"># enter your user's password</span><br />
$</div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.BuildRubySystemFromSource?action=sourceblock&amp;num=1' type='text/plain'>raw code</a></div>
</div>

<div class='vspace'></div><h2>Install Packages Ruby Needs to Build from Source</h2>

<div class='sourceblock ' id='sourceblock2'>
  <div class='sourceblocktext'><div class="bash"><span class="co4">$ </span><span class="kw2">apt-get install</span> <span class="sy0">&lt;</span>package<span class="sy0">&gt;</span> <span class="co0"># see list below</span></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.BuildRubySystemFromSource?action=sourceblock&amp;num=2' type='text/plain'>raw code</a></div>
</div>

<div class='vspace'></div><h3>Ruby needs these to build correctly.</h3>
<ul><li>build-essential
</li><li>git-core
</li><li>curl
</li><li>bison
</li><li>openssl
</li><li>libreadline6
</li><li>libreadline6-dev
</li><li>zlib1g
</li><li>zlib1g-dev
</li><li>libssl-dev
</li><li>libyaml-dev
</li><li>libxml2-dev
</li><li>libxslt-dev
</li><li>autoconf
</li><li>libc6-dev
</li><li>ncurses-dev
</li><li>libcurl4-openssl-dev
</li><li>libopenssl-ruby
</li><li>apache2-prefork-dev
</li><li>libapr1-dev
</li><li>libaprutil1-dev
</li><li>libx11-dev
</li><li>libffi-dev
</li><li>tcl-dev
</li><li>tk-dev 
</li></ul><p class='vspace'>These will pull in other packages as needed.
</p>
<div class='vspace'></div>
<div class='sourceblock ' id='sourceblock3'>
  <div class='sourceblocktext'><div class="bash"><ol><li class="li1"><div class="de1">$ <span class="kw2">apt-get install</span> build-essential git-core curl <span class="kw2">bison</span> openssl \</div></li>
<li class="li1"><div class="de1">libreadline6 &nbsp;libreadline6-dev zlib1g zlib1g-dev libssl-dev \</div></li>
<li class="li1"><div class="de1">libyaml-dev libxml2-dev libxslt-dev <span class="kw2">autoconf</span> libc6-dev ncurses-dev \</div></li>
<li class="li1"><div class="de1">libcurl4-openssl-dev libopenssl-ruby apache2-prefork-dev libapr1-dev \</div></li>
<li class="li2"><div class="de2">libaprutil1-dev libx11-dev libffi-dev tcl-dev tk-dev</div></li>
</ol></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.BuildRubySystemFromSource?action=sourceblock&amp;num=3' type='text/plain'>raw code</a></div>
</div>

<div class='vspace'></div><h2>Acquire the Ruby Source</h2>
<p>Download the latest version of Ruby here: <a class='external' href='http://www.ruby-lang.org/en/downloads/' target='_blank'>http://www.ruby-lang.org/en/downloads/</a> under the Compiling Ruby ?? Source code section.
</p>
<div class='vspace'></div>
<div class='sourceblock ' id='sourceblock4'>
  <div class='sourceblocktext'><div class="bash"><span class="kw3">cd</span> <span class="sy0">/</span>usr<span class="sy0">/</span>src<br />
<span class="kw2">wget</span> http:<span class="sy0">//</span>cache.ruby-lang.org<span class="sy0">/</span>pub<span class="sy0">/</span>ruby<span class="sy0">/</span><span class="nu0">2.1</span><span class="sy0">/</span>ruby-2.1.0.tar.gz<br />
<span class="kw2">tar</span> zxvf ruby-2.1.0.tar.gz<br />
<span class="kw3">cd</span> ruby-2.1.0</div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.BuildRubySystemFromSource?action=sourceblock&amp;num=4' type='text/plain'>raw code</a></div>
</div>

<div class='vspace'></div><h2>Do the needful</h2>
<p>This is the point where you will actually configure, build, and
install ruby onto your system. Deciding where to put the new version
is something you have to consider.
</p>
<p class='vspace'>Installing into <code>/usr</code> directory will replace the existing system
ruby. This isn't a bad idea in all cases, but some packages and
utilities may rely on features in the old version of ruby. Still, I
haven't encountered any problems in do this on a modern running
debian-based system.
</p>
<p class='vspace'>Installing into <code>/usr/local</code> is a popular option, but you need to
ensure that you have your environment set up to know which ruby to
run. When logged in, it is rather simple to keep the <code>/usr/local</code>
directory before the <code>/usr</code> directory in your <code>PATH</code> environment
variable, which is all that should really be necessary. However, in
other  environments, such as <code>crontab</code> and other system settings,
you might need to do a little more to ensure the <code>PATH</code> is set
correctly.
</p>
<div class='vspace'></div>
<div class='sourceblock ' id='sourceblock5'>
  <div class='sourceblocktext'><div class="bash">.<span class="sy0">/</span>configure <span class="re5">--prefix</span>=<span class="sy0">/</span>usr <span class="co0"># default setups</span><br />
<span class="kw2">make</span> <span class="co0"># compiles the source</span><br />
<span class="kw2">make</span> <span class="kw2">install</span> <span class="co0"># installs the programs in /usr/bin, etc</span></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.BuildRubySystemFromSource?action=sourceblock&amp;num=5' type='text/plain'>raw code</a></div>
</div>

<div class='vspace'></div><h2>Test the install</h2>

<div class='sourceblock ' id='sourceblock6'>
  <div class='sourceblocktext'><div class="bash"><span class="kw3">cd</span><br />
<span class="kw2">which</span> ruby; ruby <span class="re5">--version</span><br />
<span class="kw2">which</span> irb; irb <span class="re5">--version</span><br />
<span class="kw2">which</span> gem; gem <span class="re5">--version</span><br />
<span class="kw2">which</span> rake; rake <span class="re5">--version</span></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.BuildRubySystemFromSource?action=sourceblock&amp;num=6' type='text/plain'>raw code</a></div>
</div>

<div class='vspace'></div><h2>Install some gems</h2>

<div class='sourceblock ' id='sourceblock7'>
  <div class='sourceblocktext'><div class="bash">gem <span class="kw2">install</span> bundler<br />
gem <span class="kw2">install</span> rails</div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.BuildRubySystemFromSource?action=sourceblock&amp;num=7' type='text/plain'>raw code</a></div>
</div>

<p class='vspace'><a class='external' href='http://bundler.io' target='_blank'><code>bundler</code></a> is probably the most important
gem to install. It is used to manage gems for developing programs,
libraries, ruby packages, and applications. Install it, and be happy.
</p>
<p class='vspace'><a class='wikilink' href='http://wiki.tamouse.org?n=Technology.RubyOnRails?action=print'>Rails</a> is the premier web application framework based on <a class='wikilink' href='http://wiki.tamouse.org?n=Technology.Ruby?action=print'>Ruby</a>
and is the reason so many people learn Ruby. It's not the only one,
so you don't have to install it, but it's really a good test of a new
installation of ruby.
</p>
<div class='vspace'></div><h2>Logout from root, login as user</h2>
<p>Of note, since you've compiled and installed ruby as the system ruby,
you will need to continue installing gems as the superuser, unless you
set the environment variable <code>GEM_PATH</code> in your user's <code>.profile</code>
to something you can write to. This is the best way to do development,
with your own local per-user set of gems. When you deploy your ruby
projects, you'll be able to decide at that point where and how to
install necessary gems.
</p>
<div class='vspace'></div><h2>Create a new gem</h2>

<div class='sourceblock ' id='sourceblock8'>
  <div class='sourceblocktext'><div class="bash"><ol><li class="li1"><div class="de1">$ <span class="kw2">mkdir</span> <span class="re5">-p</span> ~<span class="sy0">/</span>Projects<span class="sy0">/</span>ruby_projects</div></li>
<li class="li1"><div class="de1">$ <span class="kw3">cd</span> ~<span class="sy0">/</span>Projects<span class="sy0">/</span>ruby_projects</div></li>
<li class="li1"><div class="de1">$ bundle gem my_test_gem</div></li>
</ol></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.BuildRubySystemFromSource?action=sourceblock&amp;num=8' type='text/plain'>raw code</a></div>
</div>

<div class='vspace'></div><h2>Create a test rails app</h2>

<div class='sourceblock ' id='sourceblock9'>
  <div class='sourceblocktext'><div class="bash"><ol><li class="li1"><div class="de1">$ <span class="kw2">mkdir</span> <span class="re5">-p</span> ~<span class="sy0">/</span>Websites<span class="sy0">/</span>rails</div></li>
<li class="li1"><div class="de1">$ <span class="kw3">cd</span> ~<span class="sy0">/</span>Websites<span class="sy0">/</span>rails</div></li>
<li class="li1"><div class="de1">$ rails new my_test_rails</div></li>
</ol></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.BuildRubySystemFromSource?action=sourceblock&amp;num=9' type='text/plain'>raw code</a></div>
</div>

<div class='vspace'></div><div  style='display: none;' > 
<p>Summary: A step-by-step recording of building a Ruby dev system from source
Parent:(Technology.)Ruby
<span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=Technology.IncludeMe?action=edit'>IncludeMe</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=Technology.IncludeMe?action=edit'>?</a></span>:<a class='wikilink' href='http://wiki.tamouse.org?n=Technology.Ruby?action=print'>Ruby</a>
Categories:<a class='categorylink' href='http://wiki.tamouse.org?n=Category.Articles'>Articles</a>, <a class='categorylink' href='http://wiki.tamouse.org?n=Category.HowTos'>HowTos</a>
Tags: ruby, howtos
</p></div>
</div>

</body>
</html>
