<!DOCTYPE html>
<html><head>
  <title>TamWiki | Technology / AlwaysLeaveTheBodyBraceOnTheSameLineAsTheProc</title>
  <link rel='stylesheet' href='http://wiki.tamouse.org/pub/skins/print/print.css' type='text/css' />
</head>
<body>
<!--PageText-->
<div id='wikitext'>
<p><a name='excerpt' id='excerpt'></a>
<a class='wikilink' href='http://wiki.tamouse.org?n=Technology.TclTk?action=print'>Tcl</a> is very finicky about where things are placed. Unlike other programming languages, location and white space seem to make a big difference to Tcl.
<a name='excerptend' id='excerptend'></a>
</p>
<p class='vspace'>For example, compare the brace placement on this snippet:
</p>
<div class='vspace'></div>
<div class='sourceblock ' id='sourceblock1'>
  <div class='sourceblocktext'><div><ol><li>proc ::testegg::msg_test {nick userhost hand text}</li><li>{</li><li>    set msg "nick=$nick. userhost=$userhost. hand=$hand. text=$text"</li><li>    putcmdlog [concat "testegg: " $msg]</li><li>    putserv [concat "PRIVMSG " $nick " :" $msg]</li><li>    return 1</li><li>}</li></ol></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.AlwaysLeaveTheBodyBraceOnTheSameLineAsTheProc?action=sourceblock&amp;num=1' type='text/plain'>raw code</a></div>
</div>

<p class='vspace'>to the brace placement on this one:
</p>
<div class='vspace'></div>
<div class='sourceblock ' id='sourceblock2'>
  <div class='sourceblocktext'><div><ol><li>proc ::testegg::msg_test {nick userhost hand text} {</li><li>    set msg "nick=$nick. userhost=$userhost. hand=$hand. text=$text"</li><li>    putcmdlog [concat "testegg: " $msg]</li><li>    putserv [concat "PRIVMSG " $nick " :" $msg]</li><li>    return 1</li><li>}</li></ol></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.AlwaysLeaveTheBodyBraceOnTheSameLineAsTheProc?action=sourceblock&amp;num=2' type='text/plain'>raw code</a></div>
</div>

<p class='vspace'>The first example will fail, because Tcl wants the body opening brace to be on the same line as the proc command.
</p>
<p class='vspace'>I think it took me about 3 hours to figure that out...
</p>
<div class='vspace'></div>
</div>

</body>
</html>
