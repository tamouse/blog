<!DOCTYPE html>
<html><head>
  <title>TamWiki | SavedArticles / User-triggerable NULL pointer dereference due to utter plebbery </title>
  <link rel='stylesheet' href='http://wiki.tamouse.org/pub/skins/print/print.css' type='text/css' />
</head>
<body>
<!--PageText-->
<div id='wikitext'>
<div  style='display: none;' > 
<p>Title: User-triggerable NULL pointer dereference due to utter plebbery
Summary: a rather comical bug report that brings in words such as 'plebbery' and 'LOLLERPLEX'
Categories: <a class='categorylink' href='http://wiki.tamouse.org?n=Category.Articles'>Articles</a>, <a class='categorylink' href='http://wiki.tamouse.org?n=Category.Humour'>Humour</a>
Tags: funny, geek, humour, bug report, null
Source: <a class='external' href='https://jira.mongodb.org/browse/PYTHON-532' target='_blank'>https://jira.mongodb.org/browse/PYTHON-532</a>
Parent:<span class='wikiword'><a class='wikilink' href='http://wiki.tamouse.org?n=SavedArticles.HomePage?action=print'>SavedArticles</a></span>(.<span class='wikiword'><a class='wikilink' href='http://wiki.tamouse.org?n=SavedArticles.HomePage?action=print'>HomePage</a></span>)
<span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.IncludeMe?action=edit'>IncludeMe</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.IncludeMe?action=edit'>?</a></span>:<a class='wikilink' href='http://wiki.tamouse.org?n=SavedArticles.HomePage?action=print'>SavedArticles.HomePage</a>
</p></div>
<div class='vspace'></div><h1><a class='external' href='https://jira.mongodb.org/secure/MyJiraHome.jspa' target='_blank'><img src='https://www.10gen.com/static/images/logo-mongodb-for-jira.png' alt='' /></a></h1>
<ul><li><a class='external' href='https://jira.mongodb.org/login.jsp?os_destination=/browse/PYTHON-532' target='_blank'>Log In</a>  <a class='external' href='https://jira.mongodb.org#' target='_blank'>Access more options</a>
<ul><li><a class='external' href='https://docs.atlassian.com/jira/docs-051/JIRA+Documentation' target='_blank'>Online Help</a>
</li><li><a class='external' href='http://docs.atlassian.com/greenhopper/docs-0610/GreenHopper+Documentation' target='_blank'>GreenHopper Help</a>
</li><li><a class='external' href='http://answers.atlassian.com/tags/agile/' target='_blank'>Agile Answers</a>
</li><li><a class='external' href='https://jira.mongodb.org/secure/ViewKeyboardShortcuts!default.jspa' target='_blank'>Keyboard Shortcuts</a>
</li><li><a class='external' href='http://www.atlassian.com/software/jira' target='_blank'>About JIRA</a>
</li><li><a class='external' href='https://jira.mongodb.org/secure/JiraCreditsPage!default.jspa' target='_blank'>JIRA Credits</a>
</li><li><a class='external' href='https://docs.atlassian.com/jira/docs-051/whatsnew/iframe' target='_blank'>What??s New</a>
</li></ul><div class='vspace'></div></li><li><a class='external' href='https://jira.mongodb.org/secure/Dashboard.jspa' target='_blank'>Dashboards</a>  <a class='external' href='https://jira.mongodb.org#' target='_blank'>Access more options (Ctrl+Alt+d)</a>
</li><li><a class='external' href='https://jira.mongodb.org/browse/PYTHON' target='_blank'>Projects</a>  <a class='external' href='https://jira.mongodb.org#' target='_blank'>Access more options (Ctrl+Alt+p)</a>
</li><li><a class='external' href='https://jira.mongodb.org/secure/IssueNavigator.jspa' target='_blank'>Issues</a>  <a class='external' href='https://jira.mongodb.org#' target='_blank'>Access more options (Ctrl+Alt+i)</a>
</li><li><a class='external' href='https://jira.mongodb.org/secure/GreenHopper.jspa' target='_blank'>Agile</a>  <a class='external' href='https://jira.mongodb.org#' target='_blank'>Access more options (Ctrl+Alt+g)</a>
<div class='vspace'></div></li><li>Quick Search
</li></ul><div class='vspace'></div><pre>   <a class='external' href='https://jira.mongodb.org/secure/projectavatar?pid=10004&amp;avatarId=10908&amp;size=large' target='_blank'>https://jira.mongodb.org/secure/projectavatar?pid=10004&amp;avatarId=10908&amp;size=large</a>
</pre><div class='vspace'></div><ul><li><a class='external' href='https://jira.mongodb.org/browse/PYTHON' target='_blank'>Python Driver</a>
</li><li><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532' target='_blank'>PYTHON-532</a>
</li></ul><div class='vspace'></div><h1><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532' target='_blank'>User-triggerable NULL pointer dereference due to utter plebbery</a></h1>
<ul><li><a class='external' href='https://jira.mongodb.org/secure/GHGoToBoard.jspa?issueId=77390' target='_blank'>Agile Board</a>
</li><li>More Actions
<div class='vspace'></div></li><li><a class='external' href='https://jira.mongodb.org#' target='_blank'>Views</a>
<ul><li><a class='external' href='https://jira.mongodb.org/si/jira.issueviews:issue-xml/PYTHON-532/PYTHON-532.xml' target='_blank'>XML</a>
</li><li><a class='external' href='https://jira.mongodb.org/si/jira.issueviews:issue-word/PYTHON-532/PYTHON-532.doc' target='_blank'>Word</a>
</li><li><a class='external' href='https://jira.mongodb.org/si/jira.issueviews:issue-html/PYTHON-532/PYTHON-532.html' target='_blank'>Printable</a>
</li></ul></li></ul><div class='vspace'></div><h3>Details</h3>
<ul><li><strong>Type:</strong>  <img src='https://jira.mongodb.org/images/icons/bug.gif' alt='' title='' /> Bug
</li><li><strong>Status:</strong>  <img src='https://jira.mongodb.org/images/icons/status_closed.gif' alt='' title='' /> Closed
</li><li><strong>Priority:</strong>  <img src='https://jira.mongodb.org/images/icons/priority_critical.gif' alt='' title='' /> Critical - P2
</li><li><strong>Resolution:</strong>  Fixed
</li><li><strong>Affects Version/s:</strong>  None
</li><li><strong>Fix Version/s:</strong>   <a class='external' href='https://jira.mongodb.org/browse/PYTHON/fixforversion/12581' target='_blank'>2.5.2</a>
</li><li><strong>Labels:</strong>None
</li><li><strong>Environment:</strong> ALL THE ENVIRONMENTS
<div class='vspace'></div></li><li><strong>Backward Breaking:</strong> Yes
</li><li><strong>Operating System:</strong> ALL
</li><li><strong># Replies:</strong> 11
</li></ul><div class='vspace'></div><h3>Description</h3>
<p>Steps to reproduce:
</p>
<p class='vspace'>Step 1. Use Mongo as WEB SCALE DOCUMENT STORE OF CHOICE LOL
</p>
<p class='vspace'>Step 2. Assume basic engineering principles applied throughout due to HEAVY MARKETING SUGGESTING AWESOMENESS.
</p>
<p class='vspace'>Step 3. Spend 6 months fighting plebbery across the spectrum, mostly succeed.
</p>
<p class='vspace'>Step 4. NIGHT BEFORE INVESTOR DEMO, TRY UPLOADING SOME DATA WITH "{$ref: '#/mongodb/plebtastic'"
</p>
<p class='vspace'>Step 5. LOL WTF?!?!? PYMONGO CRASH?? :OOO LOOOL WEBSCALE
</p>
<p class='vspace'>Step 6. It's 4am now. STILL INVESTIGATING
</p>
<p class='vspace'>b4cb9be0 pymongo/_cbsonmodule.c (Mike Dirolf 2009-11-10 14:54:39 -0500 1196) /* Decoding for <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.DBRefs?action=edit'>DBRefs</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.DBRefs?action=edit'>?</a></span> */
</p>
<p class='vspace'>Oh Mike!!!
</p>
<p class='vspace'>Step 7. DISCOVER PYMONGO DOES NOT CHECK RETURN VALUES IN MULTIPLE PLACES. DISCOVER ORIGINAL AUTHOR SHOULD NOT BE ALLOWED NEAR COMPUTER
</p>
<p class='vspace'>0558b0d4 pymongo/_cbsonmodule.c (Mike Dirolf 2009-06-08 15:06:12 -0400 1197) if (strcmp(buffer + <strong>position + 5, "$ref") == 0) { /</strong> <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.DBRef?action=edit'>DBRef</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.DBRef?action=edit'>?</a></span> */ <br />f3da57be pymongo/_cbsonmodule.c (sibsibsib 2010-08-03 13:24:14 +0800 1198) <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.PyObject?action=edit'>PyObject</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.PyObject?action=edit'>?</a></span>* dbref; <br />b4cb9be0 pymongo/_cbsonmodule.c (Mike Dirolf 2009-11-10 14:54:39 -0500 1199) <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.PyObject?action=edit'>PyObject</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.PyObject?action=edit'>?</a></span>* collection = <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.PyDict?action=edit'>PyDict</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.PyDict?action=edit'>?</a></span>_GetItemString(value, "$ref"); <br />... <br />30c253e6 pymongo/_cbsonmodule.c (Mike Dirolf 2010-06-22 12:29:20 -0400 1206) <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.PyDict?action=edit'>PyDict</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.PyDict?action=edit'>?</a></span>_DelItemString(value, "$id"); <br />... <br />6b0a9ccb pymongo/_cbsonmodule.c (Mike Dirolf 2010-06-21 15:15:00 -0400 1220) Py_DECREF(id);
</p>
<p class='vspace'>LOOOOL!
</p>
<p class='vspace'>OH MIKE OH MIKE!! BUT WHAT IF $ref DOESNT HAVE $id KEY? LOOL
</p>
<p class='vspace'>Step 8. REALIZE I CAN CRASH 99% OF ALL WEB 3.9 SHIT-TASTIC WEBSCALE MONGO-DEPLOYING SERVICES WITH 16 BYTE POST
</p>
<p class='vspace'>Step 9. REALIZE 10GEN ARE TOO WORTHLESSLY CLUELESS TO LICENCE A STATIC ANALYZER THAT WOULD HAVE NOTICED THIS PROBLEM IN 0.0000001 NANOSECONDS?!!?!?@#
</p>
<p class='vspace'>Step 10. TRY DELETING _cbson.so.
</p>
<p class='vspace'>Step 11. LOOOOOOOOOOOOL MORE NULL PTR DEREFS IN _cmessage.so!!?!? LOLLERPLEX??!? NULL IS FOR LOSERS LOLOL
</p>
<p class='vspace'>Steps to fix:
</p>
<p class='vspace'>1. MIKE WAS BORN A TECH WRITER. REVOKE COMMIT PRIVS TODAY
</p>
<p class='vspace'>2. BUY A GODDAMNED COVERITY LICENCE YOU AMATEURS
</p>
<p class='vspace'>3. ADD process_dbrefs=False TO ALL THE DRIVERS
</p>
<p class='vspace'>4. FIX NULL PTR DEREFERENCE
</p>
<p class='vspace'>5. PUBLISH SECURITY ADVISORY OR I WILL DO IT FOR YOU
</p>
<div class='vspace'></div><h3>Activity</h3>
<p><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?actionOrder=desc' target='_blank'>Ascending order - Click to sort in descending order</a>
</p>
<div class='vspace'></div><ul><li><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel' target='_blank'><strong>All</strong></a>
</li><li><strong>Comments</strong>
</li><li><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel' target='_blank'><strong>History</strong></a>
</li><li><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab' target='_blank'><strong>Activity</strong></a>
</li></ul><p class='vspace'><a class='external' href='https://jira.mongodb.org#' target='_blank'>Hide</a><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?focusedCommentId=349755&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-349755' target='_blank'>Permalink</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=spf13' target='_blank'>Steve Francia</a> added a comment - May 31 2013 12:29:33 PM UTC
</p>
<p class='vspace'>Thank you for the bug report. We have people looking into this issue and should have a resolution soon.
</p>
<p class='vspace'><a class='external' href='https://jira.mongodb.org#' target='_blank'>Show</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=spf13' target='_blank'>Steve Francia</a> added a comment - May 31 2013 12:29:33 PM UTC Thank you for the bug report. We have people looking into this issue and should have a resolution soon. <a class='external' href='https://jira.mongodb.org#' target='_blank'>Hide</a><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?focusedCommentId=349758&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-349758' target='_blank'>Permalink</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=mpobrien' target='_blank'>Michael O'Brien</a> added a comment - May 31 2013 12:37:26 PM UTC - edited
</p>
<p class='vspace'>To reproduce:
</p>
<p class='vspace'>?? in mongo shell:
</p>
<div class='vspace'></div><pre> db.python532.insert({x : {"$ref" : "whatever"} });
</pre><div class='vspace'></div><div><img src='https://jira.mongodb.org/s/en_UScn8g8z/782/6/1.6.0/_/download/resources/jira.plugin.syntaxhighlighter.macro.syntaxplugin:images/blank.png' alt='' title='' /></div>
<p class='vspace'>?? in python shell
</p>
<div class='vspace'></div><pre> import pymongo
 pymongo.<span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.MongoClient?action=edit'>MongoClient</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.MongoClient?action=edit'>?</a></span>().test.python532.find_one()
</pre><div class='vspace'></div><div><img src='https://jira.mongodb.org/s/en_UScn8g8z/782/6/1.6.0/_/download/resources/jira.plugin.syntaxhighlighter.macro.syntaxplugin:images/blank.png' alt='' title='' /></div>
<p class='vspace'>It's worth noting that pymongo won't let you make a <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.DBRef?action=edit'>DBRef</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.DBRef?action=edit'>?</a></span> without the _id, so in order to hit the bug you need to save a doc in some way that bypasses any validation (e.g. mongo shell)
</p>
<p class='vspace'><a class='external' href='https://jira.mongodb.org#' target='_blank'>Show</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=mpobrien' target='_blank'>Michael O'Brien</a> added a comment - May 31 2013 12:37:26 PM UTC - edited To reproduce: ?? in mongo shell: db.python532.insert({x : {"$ref" : "whatever"} }); ?? in python shell import pymongo pymongo.<span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.MongoClient?action=edit'>MongoClient</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.MongoClient?action=edit'>?</a></span>().test.python532.find_one() It's worth noting that pymongo won't let you make a <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.DBRef?action=edit'>DBRef</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.DBRef?action=edit'>?</a></span> without the _id, so in order to hit the bug you need to save a doc in some way that bypasses any validation (e.g. mongo shell) <a class='external' href='https://jira.mongodb.org#' target='_blank'>Hide</a><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?focusedCommentId=349768&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-349768' target='_blank'>Permalink</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=jibberz' target='_blank'>Jibbers McGee</a> added a comment - May 31 2013 12:49:03 PM UTC
</p>
<p class='vspace'>We were using find_and_modify() for the insert, which doesn't seem to trigger that check.
</p>
<p class='vspace'><a class='external' href='https://jira.mongodb.org#' target='_blank'>Show</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=jibberz' target='_blank'>Jibbers McGee</a> added a comment - May 31 2013 12:49:03 PM UTC We were using find_and_modify() for the insert, which doesn't seem to trigger that check. <a class='external' href='https://jira.mongodb.org#' target='_blank'>Hide</a><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?focusedCommentId=349798&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-349798' target='_blank'>Permalink</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=dissappointed_jira_viewer' target='_blank'>Very Disappointed</a> added a comment - May 31 2013 01:27:40 PM UTC
</p>
<p class='vspace'>Is that all? So blunt answers...
</p>
<p class='vspace'><a class='external' href='https://jira.mongodb.org#' target='_blank'>Show</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=dissappointed_jira_viewer' target='_blank'>Very Disappointed</a> added a comment - May 31 2013 01:27:40 PM UTC Is that all? So blunt answers... <a class='external' href='https://jira.mongodb.org#' target='_blank'>Hide</a><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?focusedCommentId=349850&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-349850' target='_blank'>Permalink</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=auto' target='_blank'>auto</a> added a comment - May 31 2013 02:21:52 PM UTC
</p>
<p class='vspace'>Author:{u'username': u'ajdavis', u'name': u'A. Jesse Jiryu Davis', u'email': u'jesse@10gen.com'} <br />Message: Fix null pointer when decoding invalid <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.DBRef?action=edit'>DBRef</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.DBRef?action=edit'>?</a></span> <a class='external' href='https://jira.mongodb.org/browse/PYTHON-532' target='_blank'></a>
</p>
<p class='vspace'><del>PYTHON-532</del> <br />Branch: v2.5 <br /><a class='external' href='https://github.com/mongodb/mongo-python-driver/commit/a060c15ef87e0f0e72974c7c0e57fe811bbd06a2<a class='external' href='https://jira.mongodb.org#' target='_blank'>Show</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=auto' target='_blank'>auto</a>' target='_blank'>https://github.com/mongodb/mongo-python-driver/commit/a060c15ef87e0f0e72974c7c0e57fe811bbd06a2<a class='external' href='https://jira.mongodb.org#' target='_blank'>Show</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=auto' target='_blank'>auto</a></a> added a comment - May 31 2013 02:21:52 PM UTC Author:{u'username': u'ajdavis', u'name': u'A. Jesse Jiryu Davis', u'email': u'jesse@10gen.com'} Message: Fix null pointer when decoding invalid <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.DBRef?action=edit'>DBRef</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.DBRef?action=edit'>?</a></span> PYTHON-532 Branch: v2.5 <a class='external' href='https://github.com/mongodb/mongo-python-driver/commit/a060c15ef87e0f0e72974c7c0e57fe811bbd06a2' target='_blank'>https://github.com/mongodb/mongo-python-driver/commit/a060c15ef87e0f0e72974c7c0e57fe811bbd06a2</a> <a class='external' href='https://jira.mongodb.org#' target='_blank'>Hide</a><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?focusedCommentId=349945&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-349945' target='_blank'>Permalink</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=justanyone' target='_blank'>Kevin J. Rice</a> added a comment - May 31 2013 03:48:02 PM UTC
</p>
<p class='vspace'>[from disinterested observer] Gotta say: Interesting wording. Apparently, 'plebbery' derives from Latin 'plebius' meaning 'of common people', and carries elites-deriding-commoners connotations.
</p>
<p class='vspace'>I'm happy to be corrected, but it seems to me to imply snobbishness in the same way that someone claiming to be 'L33t' automatically self-nominates as a script kiddie. Someone needs to enter this in the Urban Dictionary before it flash-in-the-pan-poofs into the 7th-grade-lexicon dustbin of 'so-yesterday'.
</p>
<p class='vspace'><a class='external' href='https://jira.mongodb.org#' target='_blank'>Show</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=justanyone' target='_blank'>Kevin J. Rice</a> added a comment - May 31 2013 03:48:02 PM UTC [from disinterested observer] Gotta say: Interesting wording. Apparently, 'plebbery' derives from Latin 'plebius' meaning 'of common people', and carries elites-deriding-commoners connotations. I'm happy to be corrected, but it seems to me to imply snobbishness in the same way that someone claiming to be 'L33t' automatically self-nominates as a script kiddie. Someone needs to enter this in the Urban Dictionary before it flash-in-the-pan-poofs into the 7th-grade-lexicon dustbin of 'so-yesterday'. <a class='external' href='https://jira.mongodb.org#' target='_blank'>Hide</a><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?focusedCommentId=349994&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-349994' target='_blank'>Permalink</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=behackett' target='_blank'>Bernie Hackett</a> added a comment - May 31 2013 04:46:05 PM UTC - edited
</p>
<p class='vspace'><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=jibberz' target='_blank'>Jibbers McGee</a>, thanks for reporting this problem. We've fixed the primary issue and will do a 2.5.2 release to address it.
</p>
<p class='vspace'>We are still working on the segfault related to removing _cbson.so. That problem appears to be in python's import machinery in py2, but we want to find a workaround. In python3.1 and newer <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.ImportError?action=edit'>ImportError</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.ImportError?action=edit'>?</a></span> is properly raised, allowing <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.PyMongo?action=edit'>PyMongo</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.PyMongo?action=edit'>?</a></span> to use the pure python bson module.
</p>
<p class='vspace'><a class='external' href='https://jira.mongodb.org#' target='_blank'>Show</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=behackett' target='_blank'>Bernie Hackett</a> added a comment - May 31 2013 04:46:05 PM UTC - edited Jibbers <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.McGee?action=edit'>McGee</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.McGee?action=edit'>?</a></span> , thanks for reporting this problem. We've fixed the primary issue and will do a 2.5.2 release to address it. We are still working on the segfault related to removing _cbson.so. That problem appears to be in python's import machinery in py2, but we want to find a workaround. In python3.1 and newer <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.ImportError?action=edit'>ImportError</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.ImportError?action=edit'>?</a></span> is properly raised, allowing <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.PyMongo?action=edit'>PyMongo</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.PyMongo?action=edit'>?</a></span> to use the pure python bson module. <a class='external' href='https://jira.mongodb.org#' target='_blank'>Hide</a><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?focusedCommentId=350001&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-350001' target='_blank'>Permalink</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=jibberz' target='_blank'>Jibbers McGee</a> added a comment - May 31 2013 04:56:11 PM UTC - edited
</p>
<p class='vspace'>Apologies to anyone offended by this report. Thanks for your effort!
</p>
<p class='vspace'><a class='external' href='https://jira.mongodb.org#' target='_blank'>Show</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=jibberz' target='_blank'>Jibbers McGee</a> added a comment - May 31 2013 04:56:11 PM UTC - edited Apologies to anyone offended by this report. Thanks for your effort! <a class='external' href='https://jira.mongodb.org#' target='_blank'>Hide</a><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?focusedCommentId=350004&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-350004' target='_blank'>Permalink</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=behackett' target='_blank'>Bernie Hackett</a> added a comment - May 31 2013 05:01:03 PM UTC
</p>
<p class='vspace'><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=jibberz' target='_blank'>Jibbers McGee</a>, no problem. I understand your frustration. Thanks again for the report.
</p>
<p class='vspace'><a class='external' href='https://jira.mongodb.org#' target='_blank'>Show</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=behackett' target='_blank'>Bernie Hackett</a> added a comment - May 31 2013 05:01:03 PM UTC Jibbers <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.McGee?action=edit'>McGee</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.McGee?action=edit'>?</a></span> , no problem. I understand your frustration. Thanks again for the report. <a class='external' href='https://jira.mongodb.org#' target='_blank'>Hide</a><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?focusedCommentId=350164&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-350164' target='_blank'>Permalink</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=imatlin' target='_blank'>Igor Matlin</a> added a comment - May 31 2013 08:12:12 PM UTC
</p>
<p class='vspace'>Hello <a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=jibberz' target='_blank'>Jibbers McGee</a> and others,
</p>
<p class='vspace'>My name is Igor Matlin and I work for Coverity. 10gen does license our software, and to my knowledge they have been quite diligent in running and fixing issues identified by Coverity Static Analysis.
</p>
<p class='vspace'>Unfortunately, the code in question was not flagged. The source of <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.PyDict?action=edit'>PyDict</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.PyDict?action=edit'>?</a></span>_GetItemString was not available during scan, so static analysis engine had no evidence that the function can return NULL. Since flagging every instance where a return value is not checked tends to generate a lot of noise, most of our customers only scan for cases where evidence exists that a function can return NULL and analysis determines that return value is routinely checked.
</p>
<p class='vspace'>Coverity static analysis engine can be configured to be more aggressive and treat all functions where source is not available as potentially returning NULL. We will work with 10gen to determine the best combination of analysis options going forward.
</p>
<p class='vspace'>Regards,
</p>
<p class='vspace'>Igor Matlin
</p>
<p class='vspace'><a class='external' href='https://jira.mongodb.org#' target='_blank'>Show</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=imatlin' target='_blank'>Igor Matlin</a> added a comment - May 31 2013 08:12:12 PM UTC Hello Jibbers <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.McGee?action=edit'>McGee</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.McGee?action=edit'>?</a></span> and others, My name is Igor Matlin and I work for Coverity. 10gen does license our software, and to my knowledge they have been quite diligent in running and fixing issues identified by Coverity Static Analysis. Unfortunately, the code in question was not flagged. The source of <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.PyDict?action=edit'>PyDict</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.PyDict?action=edit'>?</a></span>_GetItemString was not available during scan, so static analysis engine had no evidence that the function can return NULL. Since flagging every instance where a return value is not checked tends to generate a lot of noise, most of our customers only scan for cases where evidence exists that a function can return NULL and analysis determines that return value is routinely checked. Coverity static analysis engine can be configured to be more aggressive and treat all functions where source is not available as potentially returning NULL. We will work with 10gen to determine the best combination of analysis options going forward. Regards, Igor Matlin <a class='external' href='https://jira.mongodb.org#' target='_blank'>Hide</a><a class='external' href='https://jira.mongodb.org/browse/PYTHON-532?focusedCommentId=350210&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-350210' target='_blank'>Permalink</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=auto' target='_blank'>auto</a> added a comment - May 31 2013 09:16:08 PM UTC
</p>
<p class='vspace'>Author:{u'username': u'behackett', u'name': u'Bernie Hackett', u'email': u'bernie@10gen.com'} <br />Message: Fix import when _cbson unavailable <a class='external' href='https://jira.mongodb.org/browse/PYTHON-532' target='_blank'></a>
</p>
<p class='vspace'><del>PYTHON-532</del>
</p>
<p class='vspace'>This ensures that we don't import _cmessage in <br />an incomplete state or segfault if _cbson isn't <br />available. If _cbson.so has been removed we fall <br />back to pure python. <br />Branch: v2.5 <br /><a class='external' href='https://github.com/mongodb/mongo-python-driver/commit/7395ce72bf54ef64d723e1b4140556ebd12a2a07' target='_blank'>https://github.com/mongodb/mongo-python-driver/commit/7395ce72bf54ef64d723e1b4140556ebd12a2a07</a>
</p>
<p class='vspace'><a class='external' href='https://jira.mongodb.org#' target='_blank'>Show</a><a class='external' href='https://jira.mongodb.org/secure/ViewProfile.jspa?name=auto' target='_blank'>auto</a> added a comment - May 31 2013 09:16:08 PM UTC Author:{u'username': u'behackett', u'name': u'Bernie Hackett', u'email': u'bernie@10gen.com'} Message: Fix import when _cbson unavailable PYTHON-532 This ensures that we don't import _cmessage in an incomplete state or segfault if _cbson isn't available. If _cbson.so has been removed we fall back to pure python. Branch: v2.5 <a class='external' href='https://github.com/mongodb/mongo-python-driver/commit/7395ce72bf54ef64d723e1b4140556ebd12a2a07' target='_blank'>https://github.com/mongodb/mongo-python-driver/commit/7395ce72bf54ef64d723e1b4140556ebd12a2a07</a>
</p>
<div class='vspace'></div><h3>People</h3>
<ul><li>:: Assignee::  Bernie Hackett
<dl><dt> Reporter</dt><dd>:  Jibbers <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.McGee?action=edit'>McGee</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.McGee?action=edit'>?</a></span>
</dd><dt> Participants</dt><dd>: <a class='external' href='https://jira.mongodb.org/secure/IssueNavigator.jspa?reset=true&amp;customfield_10051=auto' target='_blank'>auto</a>, <a class='external' href='https://jira.mongodb.org/secure/IssueNavigator.jspa?reset=true&amp;customfield_10051=behackett' target='_blank'>Bernie Hackett</a>, <a class='external' href='https://jira.mongodb.org/secure/IssueNavigator.jspa?reset=true&amp;customfield_10051=imatlin' target='_blank'>Igor Matlin</a>, <a class='external' href='https://jira.mongodb.org/secure/IssueNavigator.jspa?reset=true&amp;customfield_10051=jibberz' target='_blank'>Jibbers McGee</a>, <a class='external' href='https://jira.mongodb.org/secure/IssueNavigator.jspa?reset=true&amp;customfield_10051=justanyone' target='_blank'>Kevin J. Rice</a>, <a class='external' href='https://jira.mongodb.org/secure/IssueNavigator.jspa?reset=true&amp;customfield_10051=mpobrien' target='_blank'>Michael O'Brien</a>, <a class='external' href='https://jira.mongodb.org/secure/IssueNavigator.jspa?reset=true&amp;customfield_10051=spf13' target='_blank'>Steve Francia</a>, <a class='external' href='https://jira.mongodb.org/secure/IssueNavigator.jspa?reset=true&amp;customfield_10051=dissappointed_jira_viewer' target='_blank'>Very Disappointed</a>
</dd></dl></li></ul><p class='vspace'>Vote (4) Watch (28)
</p>
<div class='vspace'></div><h3>Dates</h3>
<ul><li>:: Created::  Friday 09:54 AM UTC
<dl><dt> Updated</dt><dd>:  Today 12:04 AM UTC
</dd><dt> Resolved</dt><dd>:  Saturday 02:48 AM UTC
</dd><dt> Days since reply</dt><dd>:  3 days ago
</dd><dt> Date of 1st Reply</dt><dd>:  31/May/13 12:29 PM
</dd></dl></li></ul><div class='vspace'></div><h3>Agile</h3>
<ul><li><a class='external' href='https://jira.mongodb.org/secure/GHGoToBoard.jspa?issueId=77390&amp;inline=true' target='_blank'>View on Board</a>
<div class='vspace'></div></li><li><a class='external' href='http://www.atlassian.com/software/jira' target='_blank'>Atlassian JIRA</a> (v5.1.3#782-sha1:4389c89)
</li><li><a class='external' href='https://jira.mongodb.org/secure/CreateIssue!default.jspa' target='_blank'>Report a problem</a>
<div class='vspace'></div></li><li>Powered by a free Atlassian <a class='external' href='http://www.atlassian.com/software/jira' target='_blank'>JIRA</a> open source license for <span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=SavedArticles.MongoDB?action=edit'>MongoDB</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=SavedArticles.MongoDB?action=edit'>?</a></span>. Try JIRA - <a class='external' href='http://www.atlassian.com/software/jira' target='_blank'>bug tracking software</a> for <em>your</em> team.
</li></ul>
</div>

</body>
</html>
