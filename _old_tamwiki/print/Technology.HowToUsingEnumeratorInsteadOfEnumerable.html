<!DOCTYPE html>
<html><head>
  <title>TamWiki | Technology / How To: Use Enumerator instead of Enumerable</title>
  <link rel='stylesheet' href='http://wiki.tamouse.org/pub/skins/print/print.css' type='text/css' />
</head>
<body>
<!--PageText-->
<div id='wikitext'>
<div  style='display: none;' > 
<p>Summary: An alternative to mixing Enumerable into your classes to get similar capability
Parent: (Technology.)Ruby
<span class='wikiword'><a class='createlinktext' rel='nofollow'
    href='http://wiki.tamouse.org?n=Technology.IncludeMe?action=edit'>IncludeMe</a><a rel='nofollow' 
    class='createlink' href='http://wiki.tamouse.org?n=Technology.IncludeMe?action=edit'>?</a></span>: <a class='wikilink' href='http://wiki.tamouse.org?n=Technology.Ruby?action=print'>Ruby</a>
Categories: <a class='categorylink' href='http://wiki.tamouse.org?n=Category.HowTos'>HowTos</a>, <a class='categorylink' href='http://wiki.tamouse.org?n=Category.Technology'>Technology</a>, <a class='categorylink' href='http://wiki.tamouse.org?n=Category.Ruby'>Ruby</a>
Tags: ruby, enumerator, enumerable
Source: <a class='external' href='http://blog.arkency.com/2014/01/ruby-to-enum-for-enumerator/' target='_blank'>http://blog.arkency.com/2014/01/ruby-to-enum-for-enumerator/</a>
Posted: Mon Jan 13 11:51:26 2014
</p></div>
<p class='vspace'><a name='excerpt' id='excerpt'></a>
Over in <a class='external' href='http://blog.arkency.com/2014/01/ruby-to-enum-for-enumerator/' target='_blank'>http://blog.arkency.com/2014/01/ruby-to-enum-for-enumerator/</a>,
<a class='external' href='http://blog.arkency.com/by/pankowecki/' target='_blank'>Robert Pankowecki</a>
talks about when to think of using the (probably
underutilized) <code class='escaped'>Enumerator</code> instead of mixing in <code class='escaped'>Enumerable</code> to
give your class the ability to handle <code class='escaped'>each</code>, <code class='escaped'>each.with_index</code>
and other such goodies from <code class='escaped'>Enumerable</code> but in the cases where your
class is <em>not actually implementing a collection</em>.
<a name='excerptend' id='excerptend'></a>
</p>
<div class='vspace'></div><div class='round lrindent quote' > 
<h2>TLDR</h2>
<p>To be consistent with Ruby Standard Library behavior, please return Enumerator for your yielding methods when block is not provided. Use this code
</p>
<div class='vspace'></div>
<div class='sourceblock ' id='sourceblock1'>
  <div class='sourceblocktext'><div class="ruby"><span class="kw2">return</span> enum_for<span class="br0">&#40;</span><span class="re3">:your_method_name_which_is_usually_each</span><span class="br0">&#41;</span> <span class="kw1">unless</span> block_given?<span class="st0">`</span></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.HowToUsingEnumeratorInsteadOfEnumerable?action=sourceblock&amp;num=1' type='text/plain'>raw code</a></div>
</div>

<p class='vspace'>to just do that.
</p>
<p class='vspace'>Your class does not always need to be Enumerable. It is ok if it just returns Enumerator.
</p></div>
<div class='vspace'></div><h2>References:</h2>
<ul><li><a class='external' href='http://ruby-doc.org/core-2.1.0/Object.html#method-i-to_enum' target='_blank'>Object#to_enum</a>
<div class='vspace'></div></li><li><a class='external' href='http://ruby-doc.org/core-2.1.0/Object.html#method-i-enum_for' target='_blank'>Object#enum_for</a>
<div class='vspace'></div></li><li><a class='external' href='http://ruby-doc.org/core-2.1.0/Enumerator.html#method-c-new' target='_blank'>Enumerator#new</a>  
</li></ul><div class='vspace'></div>
</div>

</body>
</html>
