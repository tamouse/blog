<!DOCTYPE html>
<html><head>
  <title>TamWiki | Technology / Generating CSS with Stylish (a Ruby Gem)</title>
  <link rel='stylesheet' href='http://wiki.tamouse.org/pub/skins/print/print.css' type='text/css' />
</head>
<body>
<!--PageText-->
<div id='wikitext'>
<p><a name='excerpt' id='excerpt'></a>
<a class='external' href='https://github.com/beastaugh/stylish' target='_blank'>Stylish</a> is a ruby gem that is used to generate CSS. It can be used to generate repetitive sequences, can do variable substitution easily, and gives compact CSS code.
<a name='excerptend' id='excerptend'></a>
</p>
<div class='vspace'></div><h2>Why use a generative tool for CSS?</h2>
<p>Excerpt from Stylish's <a class='external' href='https://github.com/beastaugh/stylish/blob/master/README.md' target='_blank'>README</a> doc:
</p>
<div class='vspace'></div><div class='round lrindent quote' > 
<h3>Design notes</h3>
<p>CSS is a remarkably succinct and powerful language, with several marked deficiencies. It lacks both variables and iteration, and its long-winded property names are often irritating. Stylish attempts to address these issues by reducing duplication, providing a cleaner namespacing syntax and reducing transcription errors. It is not intended as a replacement for hand-authored CSS, but as a supplement to it.
</p>
<p class='vspace'>Stylish treats CSS as object code--but it treats it nicely.
</p></div>
<p class='vspace'>Here's an example:
</p>
<div class='vspace'></div>
<div class='sourceblock ' id='sourceblock1'>
  <div class='sourceblocktext'><div class="ruby"><ol><li class="li1"><div class="de1"><span class="co1">#!/usr/bin/ruby</span></div></li>
<li class="li1"><div class="de1"><span class="kw3">require</span> <span class="st0">'rubygems'</span></div></li>
<li class="li1"><div class="de1"><span class="kw3">require</span> <span class="st0">'stylish'</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">style = Stylish.<span class="me1">generate</span> <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; body <span class="re3">:background</span> <span class="sy0">=&gt;</span> <span class="br0">&#123;</span>:color <span class="sy0">=&gt;</span> <span class="st0">&quot;#FAFAFA&quot;</span><span class="br0">&#125;</span>, <span class="re3">:font_size</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;1em&quot;</span>, <span class="re3">:font_family</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;Arial, sans-serif&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; rule <span class="st0">&quot;#content&quot;</span>,</div></li>
<li class="li1"><div class="de1">&nbsp; <span class="re3">:background</span> <span class="sy0">=&gt;</span> <span class="br0">&#123;</span>:color <span class="sy0">=&gt;</span> <span class="st0">&quot;#000000&quot;</span><span class="br0">&#125;</span>,</div></li>
<li class="li1"><div class="de1">&nbsp; <span class="re3">:width</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;80%&quot;</span>,</div></li>
<li class="li2"><div class="de2">&nbsp; <span class="re3">:margin</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;10px auto&quot;</span>,</div></li>
<li class="li1"><div class="de1">&nbsp; <span class="re3">:padding</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;5px&quot;</span>,</div></li>
<li class="li1"><div class="de1">&nbsp; <span class="re3">:border_radius</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;15px&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; rule <span class="st0">&quot;#content&quot;</span> <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">p</span> <span class="re3">:margin</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;3px 0&quot;</span>, <span class="re3">:padding</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;0px&quot;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; a <span class="re3">:color</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;blue&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; rule <span class="st0">&quot;a:visited&quot;</span> , <span class="re3">:color</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;purple&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; rule <span class="st0">&quot;a:active&quot;</span> , <span class="re3">:color</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;red&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; rule <span class="st0">&quot;a:hover&quot;</span> , <span class="re3">:text_decoration</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;none&quot;</span>, <span class="re3">:font_style</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;italic&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; <span class="kw1">end</span></div></li>
<li class="li2"><div class="de2"><span class="kw1">end</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw3">puts</span> style;</div></li>
</ol></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.GeneratingCSSWithStylish?action=sourceblock&amp;num=1' type='text/plain'>raw code</a></div>
</div>

<p class='vspace'>and it generates the following, very compact CSS:
</p>
<div class='vspace'></div>
<div class='sourceblock ' id='sourceblock2'>
  <div class='sourceblocktext'><div class="css">body <span class="br0">&#123;</span><span class="kw1">font-size</span><span class="sy0">:</span><span class="re3">1em</span><span class="sy0">;</span> <span class="kw1">font-family</span><span class="re2">:Arial</span><span class="sy0">,</span> <span class="kw2">sans-serif</span><span class="sy0">;</span> <span class="kw1">background-color</span><span class="sy0">:</span><span class="re0">#fafafa</span><span class="sy0">;</span><span class="br0">&#125;</span><br />
#<span class="kw1">content</span> <span class="br0">&#123;</span><span class="kw1">padding</span><span class="sy0">:</span><span class="re3">5px</span><span class="sy0">;</span> <span class="kw1">border-radius</span><span class="sy0">:</span><span class="re3">15px</span><span class="sy0">;</span> <span class="kw1">width</span><span class="sy0">:</span><span class="re3">80%</span><span class="sy0">;</span> <span class="kw1">background-color</span><span class="sy0">:</span><span class="re0">#000</span><span class="sy0">;</span> <span class="kw1">margin</span><span class="sy0">:</span><span class="re3">10px</span> <span class="kw2">auto</span><span class="sy0">;</span><span class="br0">&#125;</span><br />
#<span class="kw1">content</span> p <span class="br0">&#123;</span><span class="kw1">padding</span><span class="sy0">:</span><span class="re3">0px</span><span class="sy0">;</span> <span class="kw1">margin</span><span class="sy0">:</span><span class="re3">3px</span> <span class="nu0">0</span><span class="sy0">;</span><span class="br0">&#125;</span><br />
#<span class="kw1">content</span> a <span class="br0">&#123;</span><span class="kw1">color</span><span class="sy0">:</span><span class="kw1">blue</span><span class="sy0">;</span><span class="br0">&#125;</span><br />
#<span class="kw1">content</span> a<span class="re2">:visited </span><span class="br0">&#123;</span><span class="kw1">color</span><span class="sy0">:</span><span class="kw2">purple</span><span class="sy0">;</span><span class="br0">&#125;</span><br />
#<span class="kw1">content</span> a<span class="re2">:active </span><span class="br0">&#123;</span><span class="kw1">color</span><span class="sy0">:</span><span class="kw2">red</span><span class="sy0">;</span><span class="br0">&#125;</span><br />
#<span class="kw1">content</span> a<span class="re2">:hover </span><span class="br0">&#123;</span><span class="kw1">text-decoration</span><span class="sy0">:</span><span class="kw2">none</span><span class="sy0">;</span> <span class="kw1">font-style</span><span class="sy0">:</span><span class="kw2">italic</span><span class="sy0">;</span><span class="br0">&#125;</span></div></div>
  <div class='sourceblocklink'></div>
</div>

<p class='vspace'>Output formatting can be tailored to produce something more readable/maintainable. (However, why would you maintain the output when you can maintain the source?)
</p>
<div class='vspace'></div><h2>This doesn't look all that complicated, again, Why use a generative tool?</h2>
<p>Simply put, programmatic generation of artifacts makes them easier to automatically test (using <a class='external' href='http://rspec.info' target='_blank'>rspec</a> for example). It also allows the designers to specify palettes, sizes, and other layout and UI features that can be dropped into the code more easily, letting you change them in one place.
</p>
<p class='vspace'><a name='example2' id='example2'></a>
</p><h3>Store the palette config in a YAML file</h3>

<div class='sourceblock ' id='sourceblock3'>
  <div class='sourceblocktext'><div class="yaml"><div class="head">palette.yaml</div><ol><li class="li1"><div class="de1"><span class="sy1">---</span></div></li>
<li class="li1"><div class="de1"><span class="co4">page</span>:</div></li>
<li class="li1"><div class="de1"><span class="co3">&nbsp; text</span><span class="sy2">: </span>! '<span class="co1">#000'</span></div></li>
<li class="li1"><div class="de1"><span class="co3">&nbsp; bg</span><span class="sy2">: </span>! '<span class="co1">#FAFAFA'</span></div></li>
<li class="li2"><div class="de2"><span class="co4">content</span>:</div></li>
<li class="li1"><div class="de1"><span class="co3">&nbsp; text</span><span class="sy2">: </span>! '<span class="co1">#FFF'</span></div></li>
<li class="li1"><div class="de1"><span class="co3">&nbsp; bg</span><span class="sy2">: </span>! '<span class="co1">#000'</span></div></li>
<li class="li1"><div class="de1"><span class="co4">&nbsp; links</span>:</div></li>
<li class="li1"><div class="de1"><span class="co3">&nbsp; &nbsp; unvisited</span><span class="sy2">: </span>blue</div></li>
<li class="li2"><div class="de2"><span class="co3">&nbsp; &nbsp; visited</span><span class="sy2">: </span>purple</div></li>
<li class="li1"><div class="de1"><span class="co3">&nbsp; &nbsp; active</span><span class="sy2">: </span>red</div></li>
</ol></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.GeneratingCSSWithStylish?action=sourceblock&amp;num=3' type='text/plain'>raw code</a></div>
</div>

<p class='vspace'>The palette.yaml file can be used wherever you want to generate a style file, and is separate from the actual logic.
</p>
<div class='vspace'></div><h3>Use the palette YAML file in your code:</h3>

<div class='sourceblock ' id='sourceblock4'>
  <div class='sourceblocktext'><div class="ruby"><div class="head">mystyles.rb</div><ol><li class="li1"><div class="de1"><span class="kw3">require</span> <span class="st0">'rubygems'</span></div></li>
<li class="li1"><div class="de1"><span class="kw3">require</span> <span class="st0">'stylish'</span></div></li>
<li class="li1"><div class="de1"><span class="kw3">require</span> <span class="st0">'psych'</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">palette = Psych::load_file<span class="br0">&#40;</span><span class="st0">&quot;palette.yaml&quot;</span><span class="br0">&#41;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">style = Stylish.<span class="me1">generate</span> <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; body <span class="re3">:color</span> <span class="sy0">=&gt;</span> palette<span class="br0">&#91;</span><span class="st0">'page'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'text'</span><span class="br0">&#93;</span>, <span class="re3">:background</span> <span class="sy0">=&gt;</span> <span class="br0">&#123;</span>:color <span class="sy0">=&gt;</span> palette<span class="br0">&#91;</span><span class="st0">'page'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'bg'</span><span class="br0">&#93;</span><span class="br0">&#125;</span>, <span class="re3">:font_size</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;1em&quot;</span>, <span class="re3">:font_family</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;Arial, sans-serif&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; rule <span class="st0">&quot;#content&quot;</span>,</div></li>
<li class="li2"><div class="de2">&nbsp; <span class="re3">:color</span> <span class="sy0">=&gt;</span> palette<span class="br0">&#91;</span><span class="st0">'content'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'text'</span><span class="br0">&#93;</span>,</div></li>
<li class="li1"><div class="de1">&nbsp; <span class="re3">:background</span> <span class="sy0">=&gt;</span> <span class="br0">&#123;</span>:color <span class="sy0">=&gt;</span> palette<span class="br0">&#91;</span><span class="st0">'content'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'bg'</span><span class="br0">&#93;</span><span class="br0">&#125;</span>,</div></li>
<li class="li1"><div class="de1">&nbsp; <span class="re3">:width</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;80%&quot;</span>,</div></li>
<li class="li1"><div class="de1">&nbsp; <span class="re3">:margin</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;10px auto&quot;</span>,</div></li>
<li class="li1"><div class="de1">&nbsp; <span class="re3">:padding</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;5px&quot;</span>,</div></li>
<li class="li2"><div class="de2">&nbsp; <span class="re3">:border_radius</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;15px&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; rule <span class="st0">&quot;#content&quot;</span> <span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">p</span> <span class="re3">:margin</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;3px 0&quot;</span>, <span class="re3">:padding</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;0px&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; a <span class="re3">:color</span> <span class="sy0">=&gt;</span> palette<span class="br0">&#91;</span><span class="st0">'content'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'links'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'unvisited'</span><span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; rule <span class="st0">&quot;a:visited&quot;</span> , <span class="re3">:color</span> <span class="sy0">=&gt;</span> palette<span class="br0">&#91;</span><span class="st0">'content'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'links'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'visited'</span><span class="br0">&#93;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; rule <span class="st0">&quot;a:active&quot;</span> , <span class="re3">:color</span> <span class="sy0">=&gt;</span> palette<span class="br0">&#91;</span><span class="st0">'content'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'links'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'active'</span><span class="br0">&#93;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; rule <span class="st0">&quot;a:hover&quot;</span> , <span class="re3">:text_decoration</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;none&quot;</span>, <span class="re3">:font_style</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;italic&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; <span class="kw1">end</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">end</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="kw3">puts</span> style;</div></li>
</ol></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.GeneratingCSSWithStylish?action=sourceblock&amp;num=4' type='text/plain'>raw code</a></div>
</div>

<p class='vspace'>And the output from the above is:
</p>
<div class='vspace'></div>
<div class='sourceblock ' id='sourceblock5'>
  <div class='sourceblocktext'><div class="css"><div class="head">css emitted from mystyles.rb</div><ol><li class="li1"><div class="de1">body <span class="br0">&#123;</span><span class="kw1">color</span><span class="sy0">:</span><span class="re0">#000</span><span class="sy0">;</span> <span class="kw1">background-color</span><span class="sy0">:</span><span class="re0">#fafafa</span><span class="sy0">;</span> <span class="kw1">font-size</span><span class="sy0">:</span><span class="re3">1em</span><span class="sy0">;</span> <span class="kw1">font-family</span><span class="re2">:Arial</span><span class="sy0">,</span> <span class="kw2">sans-serif</span><span class="sy0">;</span><span class="br0">&#125;</span></div></li>
<li class="li1"><div class="de1">#<span class="kw1">content</span> <span class="br0">&#123;</span><span class="kw1">color</span><span class="sy0">:</span><span class="re0">#fff</span><span class="sy0">;</span> <span class="kw1">background-color</span><span class="sy0">:</span><span class="re0">#000</span><span class="sy0">;</span> <span class="kw1">width</span><span class="sy0">:</span><span class="re3">80%</span><span class="sy0">;</span> <span class="kw1">margin</span><span class="sy0">:</span><span class="re3">10px</span> <span class="kw2">auto</span><span class="sy0">;</span> <span class="kw1">padding</span><span class="sy0">:</span><span class="re3">5px</span><span class="sy0">;</span> <span class="kw1">border-radius</span><span class="sy0">:</span><span class="re3">15px</span><span class="sy0">;</span><span class="br0">&#125;</span></div></li>
<li class="li1"><div class="de1">#<span class="kw1">content</span> p <span class="br0">&#123;</span><span class="kw1">margin</span><span class="sy0">:</span><span class="re3">3px</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="kw1">padding</span><span class="sy0">:</span><span class="re3">0px</span><span class="sy0">;</span><span class="br0">&#125;</span></div></li>
<li class="li1"><div class="de1">#<span class="kw1">content</span> a <span class="br0">&#123;</span><span class="kw1">color</span><span class="sy0">:</span><span class="kw1">blue</span><span class="sy0">;</span><span class="br0">&#125;</span></div></li>
<li class="li2"><div class="de2">#<span class="kw1">content</span> a<span class="re2">:visited </span><span class="br0">&#123;</span><span class="kw1">color</span><span class="sy0">:</span><span class="kw2">purple</span><span class="sy0">;</span><span class="br0">&#125;</span></div></li>
<li class="li1"><div class="de1">#<span class="kw1">content</span> a<span class="re2">:active </span><span class="br0">&#123;</span><span class="kw1">color</span><span class="sy0">:</span><span class="kw2">red</span><span class="sy0">;</span><span class="br0">&#125;</span></div></li>
<li class="li1"><div class="de1">#<span class="kw1">content</span> a<span class="re2">:hover </span><span class="br0">&#123;</span><span class="kw1">text-decoration</span><span class="sy0">:</span><span class="kw2">none</span><span class="sy0">;</span> <span class="kw1">font-style</span><span class="sy0">:</span><span class="kw2">italic</span><span class="sy0">;</span><span class="br0">&#125;</span></div></li>
</ol></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.GeneratingCSSWithStylish?action=sourceblock&amp;num=5' type='text/plain'>raw code</a></div>
</div>

<p><a name='example2end' id='example2end'></a>
</p>
<p class='vspace'>... in this case, the same as the first example.
</p>
<p class='vspace'>While with this simple example and the benefit may not be that obvious, when there are more complex issues, such as using the same palette across web sites, or in different style files, or, for example, in html emails generated by a site, the reuse of a simple, central palette can be most helpful.
</p>
<div class='vspace'></div>
</div>

</body>
</html>
