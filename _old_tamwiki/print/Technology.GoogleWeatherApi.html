<!DOCTYPE html>
<html><head>
  <title>TamWiki | Technology / GoogleWeatherApi</title>
  <link rel='stylesheet' href='http://wiki.tamouse.org/pub/skins/print/print.css' type='text/css' />
</head>
<body>
<!--PageText-->
<div id='wikitext'>
<p class='vspace'><a name='excerpt' id='excerpt'></a>
The iGoogle weather api is an undocument service profided by Google to
serve it's iGoogle home page weather widget. It is <em>by far</em> the
easiest weather web service to use, as everything is broken out for
you in XML.
<a name='excerptend' id='excerptend'></a>
</p>
<p class='vspace'>The call couldn't be easier, really:
</p>
<div class='vspace'></div><pre class='escaped'>
  http://www.google.com/ig/api?weather=City%20Name
</pre>
<p class='vspace'>You can specify a state abbreviation as well, for example, St. Paul, Minnesota:
</p>
<div class='vspace'></div><pre class='escaped'>
  http://www.google.com/ig/api?weather=St.%20Paul%2C%20MN
</pre>
<p class='vspace'>You can also specify a zip code:
</p>
<div class='vspace'></div><pre class='escaped'>
  http://www.google.com/ig/api?weather=55112
</pre>
<p class='vspace'>Here's an example of the XML output (tidied up) that you get for the
city of "Minneapolis":
</p>
<div class='vspace'></div>
<div class='sourceblock ' id='sourceblock1'>
  <div class='sourceblocktext'><div class="xml"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span><span class="re2">?&gt;</span></span><br />
<span class="sc3"><span class="re1">&lt;xml_api_reply</span> <span class="re0">version</span>=<span class="st0">&quot;1&quot;</span><span class="re2">&gt;</span></span><br />
&nbsp; <span class="sc3"><span class="re1">&lt;weather</span> <span class="re0">module_id</span>=<span class="st0">&quot;0&quot;</span> <span class="re0">tab_id</span>=<span class="st0">&quot;0&quot;</span> <span class="re0">mobile_row</span>=<span class="st0">&quot;0&quot;</span> <span class="re0">mobile_zipped</span>=<span class="st0">&quot;1&quot;</span></span><br />
<span class="sc3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">row</span>=<span class="st0">&quot;0&quot;</span> <span class="re0">section</span>=<span class="st0">&quot;0&quot;</span> <span class="re2">&gt;</span></span><br />
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;forecast_information<span class="re2">&gt;</span></span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;city</span> <span class="re0">data</span>=<span class="st0">&quot;Minneapolis, MN&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;postal_code</span> <span class="re0">data</span>=<span class="st0">&quot;Minneapolis&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;latitude_e6</span> <span class="re0">data</span>=<span class="st0">&quot;&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;longitude_e6</span> <span class="re0">data</span>=<span class="st0">&quot;&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;forecast_date</span> <span class="re0">data</span>=<span class="st0">&quot;2011-11-19&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;current_date_time</span> <span class="re0">data</span>=<span class="st0">&quot;2011-11-20 01:53:00 +0000&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;unit_system</span> <span class="re0">data</span>=<span class="st0">&quot;US&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/forecast_information<span class="re2">&gt;</span></span></span><br />
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;current_conditions<span class="re2">&gt;</span></span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;condition</span> <span class="re0">data</span>=<span class="st0">&quot;Light snow&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;temp_f</span> <span class="re0">data</span>=<span class="st0">&quot;27&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;temp_c</span> <span class="re0">data</span>=<span class="st0">&quot;-3&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;humidity</span> <span class="re0">data</span>=<span class="st0">&quot;Humidity: 81%&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;icon</span> <span class="re0">data</span>=<span class="st0">&quot;/ig/images/weather/flurries.gif&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;wind_condition</span> <span class="re0">data</span>=<span class="st0">&quot;Wind: NW at 10 mph&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/current_conditions<span class="re2">&gt;</span></span></span><br />
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;forecast_conditions<span class="re2">&gt;</span></span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;day_of_week</span> <span class="re0">data</span>=<span class="st0">&quot;Sat&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;low</span> <span class="re0">data</span>=<span class="st0">&quot;16&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;high</span> <span class="re0">data</span>=<span class="st0">&quot;32&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;icon</span> <span class="re0">data</span>=<span class="st0">&quot;/ig/images/weather/snow.gif&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;condition</span> <span class="re0">data</span>=<span class="st0">&quot;Snow&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/forecast_conditions<span class="re2">&gt;</span></span></span><br />
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;forecast_conditions<span class="re2">&gt;</span></span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;day_of_week</span> <span class="re0">data</span>=<span class="st0">&quot;Sun&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;low</span> <span class="re0">data</span>=<span class="st0">&quot;25&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;high</span> <span class="re0">data</span>=<span class="st0">&quot;27&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;icon</span> <span class="re0">data</span>=<span class="st0">&quot;/ig/images/weather/mostly_sunny.gif&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;condition</span> <span class="re0">data</span>=<span class="st0">&quot;Mostly Sunny&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/forecast_conditions<span class="re2">&gt;</span></span></span><br />
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;forecast_conditions<span class="re2">&gt;</span></span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;day_of_week</span> <span class="re0">data</span>=<span class="st0">&quot;Mon&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;low</span> <span class="re0">data</span>=<span class="st0">&quot;20&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;high</span> <span class="re0">data</span>=<span class="st0">&quot;36&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;icon</span> <span class="re0">data</span>=<span class="st0">&quot;/ig/images/weather/mostly_sunny.gif&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;condition</span> <span class="re0">data</span>=<span class="st0">&quot;Mostly Sunny&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/forecast_conditions<span class="re2">&gt;</span></span></span><br />
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;forecast_conditions<span class="re2">&gt;</span></span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;day_of_week</span> <span class="re0">data</span>=<span class="st0">&quot;Tue&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;low</span> <span class="re0">data</span>=<span class="st0">&quot;25&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;high</span> <span class="re0">data</span>=<span class="st0">&quot;38&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;icon</span> <span class="re0">data</span>=<span class="st0">&quot;/ig/images/weather/mostly_sunny.gif&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;condition</span> <span class="re0">data</span>=<span class="st0">&quot;Mostly Sunny&quot;</span><span class="re2">/&gt;</span></span><br />
&nbsp; <span class="sc3"><span class="re1">&lt;/forecast_conditions<span class="re2">&gt;</span></span><span class="re1">&lt;/weather<span class="re2">&gt;</span></span></span><br />
<span class="sc3"><span class="re1">&lt;/xml_api_reply<span class="re2">&gt;</span></span></span></div></div>
  <div class='sourceblocklink'></div>
</div>

<p class='vspace'>A real simple script to get the current conditions:
</p>
<div class='vspace'></div>
<div class='sourceblock ' id='sourceblock2'>
  <div class='sourceblocktext'><div class="perl"><ol><li class="li1"><div class="de1"><span class="kw2">use</span> strict<span class="sy0">;</span></div></li>
<li class="li1"><div class="de1"><span class="kw2">use</span> XML<span class="sy0">::</span><span class="me2">Simple</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1"><span class="kw2">use</span> URI<span class="sy0">::</span><span class="me2">Escape</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="kw2">use</span> constant DEFAULT_CITY <span class="sy0">=&gt;</span> <span class="st_h">'Minneapolis'</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw2">use</span> Getopt<span class="sy0">::</span><span class="me2">Mixed</span><span class="sy0">::</span><span class="me2">Help</span><span class="br0">&#40;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="st_h">'c&gt;city:s city'</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;City to look up weather for&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw1">my</span> <span class="re0">$city</span> <span class="sy0">=</span> <span class="re0">$opt_city</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">my</span> <span class="re0">$url</span> <span class="sy0">=</span> <span class="st0">&quot;http://www.google.com/ig/api?weather=&quot;</span> <span class="sy0">.</span> uri_escape<span class="br0">&#40;</span><span class="re0">$city</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">my</span> <span class="re0">$curlcmd</span> <span class="sy0">=</span> <span class="st0">&quot;curl -s $url&quot;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1"><span class="kw1">my</span> <span class="re0">$weather_xml</span> <span class="sy0">=</span> <span class="st0">`$curlcmd`</span><span class="sy0">;</span></div></li>
<li class="li2"><div class="de2"><span class="kw1">my</span> <span class="re0">$w</span> <span class="sy0">=</span> XMLin<span class="br0">&#40;</span><span class="re0">$weather_xml</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="kw3">printf</span><span class="br0">&#40;</span><span class="st0">&quot;Current conditions for %s on %s:</span></div></li>
<li class="li1"><div class="de1"><span class="st0">Temp: %s F (%s C)</span></div></li>
<li class="li1"><div class="de1"><span class="st0">Wind: %s</span></div></li>
<li class="li2"><div class="de2"><span class="st0">Humidity: %s</span></div></li>
<li class="li1"><div class="de1"><span class="st0">Sky: %s</span></div></li>
<li class="li1"><div class="de1"><span class="st0">&quot;</span><span class="sy0">,</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$w</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>weather<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>forecast_information<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>city<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>data<span class="br0">&#125;</span><span class="sy0">,</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$w</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>weather<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>forecast_information<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>forecast_date<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>data<span class="br0">&#125;</span><span class="sy0">,</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$w</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>weather<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>current_conditions<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>temp_f<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>data<span class="br0">&#125;</span><span class="sy0">,</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$w</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>weather<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>current_conditions<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>temp_c<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>data<span class="br0">&#125;</span><span class="sy0">,</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$w</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>weather<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>current_conditions<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>wind_condition<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>data<span class="br0">&#125;</span><span class="sy0">,</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$w</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>weather<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>current_conditions<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>humidity<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>data<span class="br0">&#125;</span><span class="sy0">,</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$w</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>weather<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>current_conditions<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>condition<span class="br0">&#125;</span><span class="sy0">-&gt;</span><span class="br0">&#123;</span>data<span class="br0">&#125;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; <span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
</ol></div></div>
  <div class='sourceblocklink'><a href='http://wiki.tamouse.org?n=Technology.GoogleWeatherApi?action=sourceblock&amp;num=2' type='text/plain'>raw code</a></div>
</div>

<p class='vspace'>Prints on stdout:
</p>
<div class='vspace'></div><pre class='escaped'>
Current conditions for Minneapolis, MN on 2011-11-19:
Temp: 27 F (-3 C)
Wind: Wind: NW at 10 mph
Humidity: Humidity: 81%
Sky: Light snow
</pre>
<div class='vspace'></div>
</div>

</body>
</html>
