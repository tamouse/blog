version=pmwiki-2.2.36 ordered=1 urlencoded=1
agent=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_5_8) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19
author=ImportText
charset=ISO-8859-1
csum=add summary and categories
ctime=1171837132
host=127.0.0.1
name=Technology.SleepersHistoryOfTivoSeriesIIHacks
rev=5
targets=Technology.SleepersHistoryOfTivoSeriesIIHacks
text=[[#excerpt]]%0aSnarfed from http://themurrays.homeip.net/downloads/tivo/s2_hacking/seriesii-mlar.txt%0a[[#excerptend]]%0a%0a%0a(:source lang=email:)%0aFrom: http://www.dealdatabase.com/forum/showthread.php?s=&threadid=30003%0aAuthor: Sleeper%0aDate: 12-02-2003%0a(:sourceend:)%0a%0aYes, you can hack a Series2%0a%0aOkay, I'm a total newbie at this. I've never hacked a `TiVo before. I haven't used Linux at all for the last 3 years or so. I decided to try out Tiger's suggestion on how to get a bash prompt. While everything is still fresh in my head - here is how I did it:%0a%0aFirst of all, you need a Linux installation. I grabbed one of my old PII-450 boxes and installed `RedHat 8.0 on it. I grabbed the A drive out of my `TiVo and put it into the machine, and tried to mount a partition.. No luck. As I said, I'm a newbie at this. I figured out that there is something in the kernel I need to patch. I couldn't find any patches for the 2.4.18 kernel, so I decided to look at an earlier patch and adapt it slightly.%0aBasically, you will need to recompile the kernel, and you will need to change a couple of lines in mac.c%0a%0aIn /usr/src/linux (or wherever you store your linux sources), head into fs/partitions and open up mac.c in an editor... Find a line looking something like this (this might vary depending on your kernel version):%0a%0a(:source lang=bash:)%0aif (be16_to_cpu(md->signature) != MAC_DRIVER_MAGIC) {%0a(:sourceend:)%0a%0a%0aand replace it with:%0a%0a%0a(:source lang=bash:)%0aif (be16_to_cpu(md->signature) != 0x1492) {%0a(:sourceend:)%0a%0aright after that if statement you will find a line that sets the sectorsize,%0a@@secsize = be16%3csomething>@@, replace this with%0a%0a(:source lang=bash:)%0asecsize = 512;%0a(:sourceend:)%0a%0aAll done. Recompile the kernel and remember to include support for Mac Partitions.%0a%0aAlso, please note that this patch breaks compatibility with Mac. For me, it didn't matter. For you, it might.%0a%0aI was now able to boot up my machine and mount the partitions from my `TiVo disk.%0a%0aNow, get bootpage.tgz from http://sekrut.net/~tivo/ and check what the boot parameters are, in my case:%0a%0a(:source lang=bash:)%0abootpage -p /dev/hda%0a(:sourceend:)%0a%0aI got "root=/dev/hda7" back from this.. I mounted /dev/hda7,%0a%0a(:source lang=bash:)%0amount /dev/hda7 /mnt%0a(:sourceend:)%0a%0aand looked at fstab,%0a%0a(:source lang=bash:)%0acat /mnt/etc/fstab%0a(:sourceend:)%0a%0aand was told that the [@/var@] partition was on [@/dev/hda9@]. I unmounted [@/dev/hda7@] and mounted [@/dev/hda9@]%0a%0aNow you need to generate the romfs image. first, create a new directory where you create the hacks file, I created a directory called img and put a file called hacks in there. I put the following in it (from Tiger),%0a%0a(:source lang=bash header="hacks shell script":)%0a#!/bin/bash%0a%0aexport -n BASH_ENV%0aBASH_ENV=%0a%0a(%0aexec 0%3c>/dev/null 1>&0 2>&1%0a%0awhile [ ! -d /var/hack ]; do%0asleep 1%0adone%0aexec /var/hack/hackinit%0a) &%0a(:sourceend:)%0a%0amake sure it is executable and readable by everyone%0a%0a(:source lang=bash:)%0achmod a+rwx hacks%0a(:sourceend:)%0a%0anow, generate the romfs image. For this you need genromfs. If you don't already have it, Google is your friend.%0a%0a(:source lang=bash:)%0agenromfs -f romfs.img -d img/%0a(:sourceend:)%0a%0athis takes all the files from img/ and puts it into romfs.img. I got a file that was 1024 bytes long.. I dd'd this to /dev/hda16%0a%0a(:source lang=bash:)%0add if=romfs.img of=/dev/hda16 bs=1024 count=1%0a(:sourceend:) %0a%0aAll set. Next step is to update the boot parameters, using bootpage.%0a%0a(:source lang=bash:)%0abootpage -P "root=/dev/hda7 BASH_ENV=\`mount\$IFS-n\$IFS/dev/hda16\$IFS/mnt;echo\$IFS/mnt/hacks`" -C /dev/hda%0a(:sourceend:)%0a %0aWe now have a setup that will execute anything you put in /var/hack/hackinit.%0a%0aI then ported tnlited to Series 2 using subuni's Series 2 MIPS Cross compiler. I applied the `TiVO patches to it and compiled it.. worked out of the box. I also downloaded a bunch of precompiled binaries from http://sekrut.net/~tivo/ and put them in /var/hack/bin%0a%0aMy [@/var/hack/hackinit@] contains this:%0a%0a(:source lang=bash:)%0a#!/bin/bash%0a/var/hack/bin/tnlited 23 /bin/bash%0a(:sourceend:)%0a%0aI also made sure that all files in /var/hack were executable and readable by everyone,%0a%0a(:source lang=bash:)%0achown -R a+rwx /var/hack%0a(:sourceend:)%0a%0aThat's it. I plugged my A drive back in, restarted the `TiVO, and voila! It worked.%0a%0aA big thanks to Tiger for releasing the solution and subuni for the%0across compiler and tools.%0a%0a(:source lang=bash:)%0abash-2.02# uname -a%0aLinux (none) 2.4.4-`TiVo-3.0 #11 Wed May 8 15:40:02 PDT 2002 mips unknown%0abash-2.02#%0a(:sourceend:)%0a%0a(:Summary:a series of hacks one can do on a Series II Tivo:)%0a(:Parent:(Technology.)Tivo:)%0a(:IncludeMe:[[(Technology.)Tivo]]:)%0a(:Categories:[[!Articles]]:)%0a(:Tags: tivo, hacking:)%0a(:tags-hide tivo, hacking :)%0a
time=1334714369
author:1334714369=ImportText
diff:1334714369:1274232488:=1c1,3%0a%3c [[#excerpt]]%0a---%0a> (:Summary:a series of hacks one can do on a Series II Tivo:)%0a> %25trail%25 %3c%3c|TivoHacks|>>%0a> %0a3,11c5,9%0a%3c [[#excerptend]]%0a%3c %0a%3c %0a%3c (:source lang=email:)%0a%3c From: http://www.dealdatabase.com/forum/showthread.php?s=&threadid=30003%0a%3c Author: Sleeper%0a%3c Date: 12-02-2003%0a%3c (:sourceend:)%0a%3c %0a---%0a> %0a>  From: http://www.dealdatabase.com/forum/showthread.php?s=&threadid=30003%0a>  Author: Sleeper%0a>  Date: 12-02-2003%0a> %0a21,25c19,22%0a%3c (:source lang=bash:)%0a%3c if (be16_to_cpu(md->signature) != MAC_DRIVER_MAGIC) {%0a%3c (:sourceend:)%0a%3c %0a%3c %0a---%0a> %0a>  if (be16_to_cpu(md->signature) != MAC_DRIVER_MAGIC) {%0a> %0a> %0a29,32c26,28%0a%3c (:source lang=bash:)%0a%3c if (be16_to_cpu(md->signature) != 0x1492) {%0a%3c (:sourceend:)%0a%3c %0a---%0a>  if (be16_to_cpu(md->signature) != 0x1492) {%0a> %0a> %0a36,39c32,35%0a%3c (:source lang=bash:)%0a%3c secsize = 512;%0a%3c (:sourceend:)%0a%3c %0a---%0a> %0a>  secsize = 512;%0a> %0a> %0a48,51c44,47%0a%3c (:source lang=bash:)%0a%3c bootpage -p /dev/hda%0a%3c (:sourceend:)%0a%3c %0a---%0a> %0a>  bootpage -p /dev/hda%0a> %0a> %0a54,57c50,53%0a%3c (:source lang=bash:)%0a%3c mount /dev/hda7 /mnt%0a%3c (:sourceend:)%0a%3c %0a---%0a> %0a>  mount /dev/hda7 /mnt%0a> %0a> %0a60,65c56,62%0a%3c (:source lang=bash:)%0a%3c cat /mnt/etc/fstab%0a%3c (:sourceend:)%0a%3c %0a%3c and was told that the [@/var@] partition was on [@/dev/hda9@]. I unmounted [@/dev/hda7@] and mounted [@/dev/hda9@]%0a%3c %0a---%0a> %0a>  cat /mnt/etc/fstab%0a> %0a> %0a> and was told that the /var partition was on /dev/hda9. I unmounted /dev/hda7 and mounted /dev/hda9%0a> %0a> %0a68,89c65,81%0a%3c (:source lang=bash header="hacks shell script":)%0a%3c #!/bin/bash%0a%3c %0a%3c export -n BASH_ENV%0a%3c BASH_ENV=%0a%3c %0a%3c (%0a%3c exec 0%3c>/dev/null 1>&0 2>&1%0a%3c %0a%3c while [ ! -d /var/hack ]; do%0a%3c sleep 1%0a%3c done%0a%3c exec /var/hack/hackinit%0a%3c ) &%0a%3c (:sourceend:)%0a%3c %0a%3c make sure it is executable and readable by everyone%0a%3c %0a%3c (:source lang=bash:)%0a%3c chmod a+rwx hacks%0a%3c (:sourceend:)%0a%3c %0a---%0a>  #!/bin/bash%0a> %0a>  export -n BASH_ENV%0a>  BASH_ENV=%0a> %0a>  (%0a>  exec 0%3c>/dev/null 1>&0 2>&1%0a> %0a>  while [ ! -d /var/hack ]; do%0a>  sleep 1%0a>  done%0a>  exec /var/hack/hackinit%0a>  ) &%0a> %0a> %0a> make sure it is executable and readable by everyone, chmod a+rwx hacks%0a> %0a92,95c84,87%0a%3c (:source lang=bash:)%0a%3c genromfs -f romfs.img -d img/%0a%3c (:sourceend:)%0a%3c %0a---%0a> %0a>  genromfs -f romfs.img -d img/%0a> %0a> %0a98,101c90,92%0a%3c (:source lang=bash:)%0a%3c dd if=romfs.img of=/dev/hda16 bs=1024 count=1%0a%3c (:sourceend:) %0a%3c %0a---%0a>  dd if=romfs.img of=/dev/hda16 bs=1024 count=1%0a>  %0a> %0a104,106c95%0a%3c (:source lang=bash:)%0a%3c bootpage -P "root=/dev/hda7 BASH_ENV=\`mount\$IFS-n\$IFS/dev/hda16\$IFS/mnt;echo\$IFS/mnt/hacks`" -C /dev/hda%0a%3c (:sourceend:)%0a---%0a>  bootpage -P "root=/dev/hda7 BASH_ENV=\`mount\$IFS-n\$IFS/dev/hda16\$IFS/mnt;echo\$IFS/mnt/hacks`" -C /dev/hda%0a112,118c101,107%0a%3c My [@/var/hack/hackinit@] contains this:%0a%3c %0a%3c (:source lang=bash:)%0a%3c #!/bin/bash%0a%3c /var/hack/bin/tnlited 23 /bin/bash%0a%3c (:sourceend:)%0a%3c %0a---%0a> My /var/hack/hackinit contains this:%0a> %0a>  #!/bin/bash%0a> %0a>  /var/hack/bin/tnlited 23 /bin/bash%0a> %0a> %0a121,124c110,111%0a%3c (:source lang=bash:)%0a%3c chown -R a+rwx /var/hack%0a%3c (:sourceend:)%0a%3c %0a---%0a>  chown -R a+rwx /var/hack%0a> %0a130,141c117,123%0a%3c (:source lang=bash:)%0a%3c bash-2.02# uname -a%0a%3c Linux (none) 2.4.4-`TiVo-3.0 #11 Wed May 8 15:40:02 PDT 2002 mips unknown%0a%3c bash-2.02#%0a%3c (:sourceend:)%0a%3c %0a%3c (:Summary:a series of hacks one can do on a Series II Tivo:)%0a%3c (:Parent:(Technology.)Tivo:)%0a%3c (:IncludeMe:[[(Technology.)Tivo]]:)%0a%3c (:Categories:[[!Articles]]:)%0a%3c (:Tags: tivo, hacking:)%0a%3c (:tags-hide tivo, hacking :)%0a---%0a>  bash-2.02# uname -a%0a>  Linux (none) 2.4.4-`TiVo-3.0 #11 Wed May 8 15:40:02 PDT 2002 mips unknown%0a>  bash-2.02#%0a> %0a> %25trail%25 %3c%3c|TivoHacks|>>%0a> %0a> %25lframe%25 '''Categories:''' [[!ComputerStuff]]%0a
host:1334714369=127.0.0.1
author:1274232488=tamara
csum:1274232488=add summary and categories
diff:1274232488:1272828326:minor=1,3c1,2%0a%3c (:Summary:a series of hacks one can do on a Series II Tivo:)%0a%3c %25trail%25 %3c%3c|TivoHacks|>>%0a%3c %0a---%0a> %3c%3c|TivoHacks|>>%0a> %0a6,9c5,8%0a%3c  From: http://www.dealdatabase.com/forum/showthread.php?s=&threadid=30003%0a%3c  Author: Sleeper%0a%3c  Date: 12-02-2003%0a%3c %0a---%0a> From: http://www.dealdatabase.com/forum/showthread.php?s=&threadid=30003 \\%0a> Author: Sleeper \\%0a> Date: 12-02-2003%0a> %0a123c122%0a%3c %25lframe%25 '''Categories:''' [[!ComputerStuff]]%0a---%0a> %25trail%25 '''Category:''' [[!ComputerStuff]]%0a
host:1274232488=71.193.74.221
author:1272828326=tamouse
diff:1272828326:1171837273:=120,122c120%0a%3c %25trail%25 %3c%3c|TivoHacks|>>%0a%3c %0a%3c %25trail%25 '''Category:''' [[!ComputerStuff]]%0a---%0a> %3c%3c|TivoHacks|>>%0a\ No newline at end of file%0a
host:1272828326=71.193.74.221
author:1171837273=Tamara Temple
csum:1171837273=add wikitrail
diff:1171837273:1171837132:=1,2d0%0a%3c %3c%3c|TivoHacks|>>%0a%3c %0a120d117%0a%3c %3c%3c|TivoHacks|>>%0a\ No newline at end of file%0a
host:1171837273=24.6.176.50
author:1171837132=Tamara Temple
csum:1171837132=creation
diff:1171837132:1171837132:=1,117d0%0a%3c Snarfed from http://themurrays.homeip.net/downloads/tivo/s2_hacking/seriesii-mlar.txt%0a%3c %0a%3c From: http://www.dealdatabase.com/forum/showthread.php?s=&threadid=30003 \\%0a%3c Author: Sleeper \\%0a%3c Date: 12-02-2003%0a%3c %0a%3c Yes, you can hack a Series2%0a%3c %0a%3c Okay, I'm a total newbie at this. I've never hacked a `TiVo before. I haven't used Linux at all for the last 3 years or so. I decided to try out Tiger's suggestion on how to get a bash prompt. While everything is still fresh in my head - here is how I did it:%0a%3c %0a%3c First of all, you need a Linux installation. I grabbed one of my old PII-450 boxes and installed `RedHat 8.0 on it. I grabbed the A drive out of my `TiVo and put it into the machine, and tried to mount a partition.. No luck. As I said, I'm a newbie at this. I figured out that there is something in the kernel I need to patch. I couldn't find any patches for the 2.4.18 kernel, so I decided to look at an earlier patch and adapt it slightly.%0a%3c Basically, you will need to recompile the kernel, and you will need to change a couple of lines in mac.c%0a%3c %0a%3c In /usr/src/linux (or wherever you store your linux sources), head into fs/partitions and open up mac.c in an editor... Find a line looking something like this (this might vary depending on your kernel version):%0a%3c %0a%3c %0a%3c  if (be16_to_cpu(md->signature) != MAC_DRIVER_MAGIC) {%0a%3c %0a%3c %0a%3c and replace it with:%0a%3c %0a%3c %0a%3c  if (be16_to_cpu(md->signature) != 0x1492) {%0a%3c %0a%3c %0a%3c right after that if statement you will find a line that sets the sectorsize,%0a%3c @@secsize = be16%3csomething>@@, replace this with%0a%3c %0a%3c %0a%3c  secsize = 512;%0a%3c %0a%3c %0a%3c All done. Recompile the kernel and remember to include support for Mac Partitions.%0a%3c %0a%3c Also, please note that this patch breaks compatibility with Mac. For me, it didn't matter. For you, it might.%0a%3c %0a%3c I was now able to boot up my machine and mount the partitions from my `TiVo disk.%0a%3c %0a%3c Now, get bootpage.tgz from http://sekrut.net/~tivo/ and check what the boot parameters are, in my case:%0a%3c %0a%3c %0a%3c  bootpage -p /dev/hda%0a%3c %0a%3c %0a%3c I got "root=/dev/hda7" back from this.. I mounted /dev/hda7,%0a%3c %0a%3c %0a%3c  mount /dev/hda7 /mnt%0a%3c %0a%3c %0a%3c and looked at fstab,%0a%3c %0a%3c %0a%3c  cat /mnt/etc/fstab%0a%3c %0a%3c %0a%3c and was told that the /var partition was on /dev/hda9. I unmounted /dev/hda7 and mounted /dev/hda9%0a%3c %0a%3c %0a%3c Now you need to generate the romfs image. first, create a new directory where you create the hacks file, I created a directory called img and put a file called hacks in there. I put the following in it (from Tiger),%0a%3c %0a%3c  #!/bin/bash%0a%3c %0a%3c  export -n BASH_ENV%0a%3c  BASH_ENV=%0a%3c %0a%3c  (%0a%3c  exec 0%3c>/dev/null 1>&0 2>&1%0a%3c %0a%3c  while [ ! -d /var/hack ]; do%0a%3c  sleep 1%0a%3c  done%0a%3c  exec /var/hack/hackinit%0a%3c  ) &%0a%3c %0a%3c %0a%3c make sure it is executable and readable by everyone, chmod a+rwx hacks%0a%3c %0a%3c now, generate the romfs image. For this you need genromfs. If you don't already have it, Google is your friend.%0a%3c %0a%3c %0a%3c  genromfs -f romfs.img -d img/%0a%3c %0a%3c %0a%3c this takes all the files from img/ and puts it into romfs.img. I got a file that was 1024 bytes long.. I dd'd this to /dev/hda16%0a%3c %0a%3c  dd if=romfs.img of=/dev/hda16 bs=1024 count=1%0a%3c  %0a%3c %0a%3c All set. Next step is to update the boot parameters, using bootpage.%0a%3c %0a%3c  bootpage -P "root=/dev/hda7 BASH_ENV=\`mount\$IFS-n\$IFS/dev/hda16\$IFS/mnt;echo\$IFS/mnt/hacks`" -C /dev/hda%0a%3c  %0a%3c We now have a setup that will execute anything you put in /var/hack/hackinit.%0a%3c %0a%3c I then ported tnlited to Series 2 using subuni's Series 2 MIPS Cross compiler. I applied the `TiVO patches to it and compiled it.. worked out of the box. I also downloaded a bunch of precompiled binaries from http://sekrut.net/~tivo/ and put them in /var/hack/bin%0a%3c %0a%3c My /var/hack/hackinit contains this:%0a%3c %0a%3c  #!/bin/bash%0a%3c %0a%3c  /var/hack/bin/tnlited 23 /bin/bash%0a%3c %0a%3c %0a%3c I also made sure that all files in /var/hack were executable and readable by everyone,%0a%3c %0a%3c  chown -R a+rwx /var/hack%0a%3c %0a%3c That's it. I plugged my A drive back in, restarted the `TiVO, and voila! It worked.%0a%3c %0a%3c A big thanks to Tiger for releasing the solution and subuni for the%0a%3c cross compiler and tools.%0a%3c %0a%3c  bash-2.02# uname -a%0a%3c  Linux (none) 2.4.4-`TiVo-3.0 #11 Wed May 8 15:40:02 PDT 2002 mips unknown%0a%3c  bash-2.02#%0a%3c %0a
host:1171837132=24.6.176.50
