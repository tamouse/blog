version=pmwiki-2.2.43 ordered=1 urlencoded=1
agent=Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:15.0) Gecko/20100101 Firefox/15.0.1
author=tamara
charset=ISO-8859-1
csum=shorten title; moved page
ctime=1350566558
host=71.63.215.130
name=Technology.WorkingWithDatesInGit
rev=3
targets=Technology.WorkingWithDatesInGit,Technology.Git,Category.Articles
text=(:nolinkwikiwords:)%0a%0a! Working with dates in Git%0a%0a>>rframe width=25pct%3c%3c%0a!!!About the author%0a%0aAlex Peattie is a freelance web developer &amp; designer based in the UK. He's currently available for hire, so [[http://www.alexpeattie.com/contact/ | get in touch]].%0a%0a!!! Get in touch%0a%0a[[mailto:alexpeattie@gmail.com | Email Alex]] \\%0a[[http://twitter.com/alexpeattie | Follow Alex on Twitter]] \\%0a[[https://github.com/alexpeattie | Follow Alex on Github]]%0a>>%3c%3c%0a%0aWhen working in [[http://git-scm.com/ | git]], you most commonly trace a repository’s history using commits’ SHA-1 hashes. To revert to a previous commit, you might write something like this:%0a%0a(:source lang=bash:)%0agit revert 883c3dc85a49d98da649%0a(:sourceend:)%0a%0aThe problem is, we tend not to think in hashes. Rather, we wonder what changes we made ''yesterday'', or remember that a now-broken piece of code worked perfectly ''a week ago''. Although we can use @@git log@@ to track down the commit we want, there has to be an easier way. Luckily git understands our human quirks, and offers us just that.%0a%0a!! Understanding dates in Git: author date vs. committer date &amp; ‘approxidate’%0a%0aThere are two kinds of timestamp in git: a @@GIT_AUTHOR_DATE@@ and a @@GIT_COMMITTER_DATE@@. Although in most cases they both store the same value, they serve slightly different purposes. As the [[http://progit.org/book/ch2-3.html | Pro Git Book]] explains:%0a%0a->The author is the person who originally wrote the work, whereas the committer is the person who last applied the work.%0a%0aSo if, for instance, you send in a patch to a project, the author date will be when you made the original commit but the committer date will be when the patch was applied. Another common scenario is rebasing: rebasing will alter the commit date, but not the author date.%0a%0aThis distinction is worth mentioning because of an inconsistency in git that [[http://cworth.org/hgbook-git/tour/ | Carl Worth points out]]:%0a%0a->By default, “git log” displays author dates as “Date” but then uses commit dates when given a –since option. That seems like broken defaults to me.%0a%0aIn other words, all the methods listed below rely on the committer date, even though you’re used to seeing the author date. As mentioned, most of the time they’ll be the same, but to see committer dates in the log just use:%0a%0a(:source lang=bash:)%0agit log --format=fuller%0a(:sourceend:)%0a%0a!!!! Date parsing with ‘approxidate’%0a%0aGit employs a kind of date parsing which will be familiar to any rubyists who’ve used [[http://chronic.rubyforge.org/ | Chronic]]. The parser, called ‘approxidate’ is very flexible, and allows both fixed dates in any format you can dream up (“10-11-1998”, “Fri Jun 4 15:46:55 2010 +0200”, “9/9/83”) and relative dates (“today”, “1 month 2 days ago”, “six minutes ago”). You can include days of the week (“last Tuesday”), timezones (“3PM GMT”) and ‘named’ times (“noon”, “tea time”).%0a%0aApproxidate isn’t really documented anywhere, but the [[https://github.com/git/git/blob/master/date.c | code for the parser]] is very readable, so check it out to get an idea of the kind of formats git will accept.%0a%0a!! log, whatchanged, –since and –until%0a%0aOK, so how about if we want to look at all the commits made since yesterday? All we need is the @@--since@@ option:%0a%0a(:source lang=bash:)%0agit log --since="yesterday"%0a(:sourceend:)%0a%0aWe can also use @@--until@@ to fetch all commits up to a certain date; or of course we can use both options in tandem:%0a%0a(:source lang=bash:)%0agit log --since="1 week ago" --until="yesterday"%0a(:sourceend:)%0a%0a@@--since@@ and @@--until@@ can also be used with @@whatchanged@@.%0a%0a(:source lang=bash:)%0agit whatchanged --since="1/1/2010"%0a(:sourceend:)%0a%0aWorth noting: instead of @@--until@@ and @@--since@@ you can use @@--before@@ and @@--after@@, if that’s more your style.%0a%0a!! revert, diff and the @ construct%0a%0aNot all git commands have options like @@--since@@ and @@--until@@. So what if we wanted to revert back to our repo as it was a month ago? Luckily git provides us with a more generic way to reference commits using dates, with the @ construct:%0a%0a(:source lang=bash:)%0agit revert master@{"1 month ago"}%0a(:sourceend:)%0a%0a(where master is the name of the branch you’re working on).%0a%0aThis lets us do clever things, like:%0a%0a(:source lang=bash:)%0agit diff master@{"yesterday"} master@{"1 year 6 months ago"}%0a(:sourceend:)%0a%0awhich will compare the repo as it was yesterday, and as it was 1 year, 6 months ago.%0a%0a!! Change history: amending and editing dates%0a%0aThere might be certain situations where you want to alter the timestamps git assigns to commits. There are a couple of ways that you can do this.%0a%0a!!!! Use @@--date@@%0a%0aThe @@--date@@ option allows you to specify the author date that git attaches to the commit. Here we can’t use approxidate unfortunately, only fixed dates will work (YYYY.MM.DD, MM/DD/YYYY, DD.MM.YYYY, [[http://www.apps.ietf.org/rfc/rfc2822.html#sec-3.3 | RFC 2822]] and [[http://en.wikipedia.org/wiki/ISO_8601 | ISO 8601]] are all valid).%0a%0a(:source lang=bash:)%0agit commit --date="Wed Feb 16 14:00 2037 +0100"%0a(:sourceend:)%0a%0aWe can also use @@amend@@ to change the timestamp of a previous commit:%0a%0a(:source lang=bash:)%0agit commit --amend --date="Wed Feb 16 14:00 2037 +0100"%0a(:sourceend:)%0a%0aUnfortunately @@--date@@ will only change the @@GIT_AUTHOR_DATE@@, not @@GIT_COMMITTER_DATE@@. If this is a problem, you may need to…%0a%0a!!!! Manually set @@GIT_AUTHOR_DATE@@ and @@GIT_COMMITTER_DATE@@%0a%0aA word of warning - overriding @@GIT_COMMITER_DATE@@ is somewhat [[http://www.kernel.org/pub/software/scm/cogito/docs/cg-commit.1.html | frowned upon]]:%0a%0a->It should be never overridden, unless you know you absolutely need to override it (to ensure the commit gets the same ID as another or when migrating history around)%0a%0a(:source lang=bash:)%0aexport GIT_AUTHOR_DATE="Wed Feb 16 14:00 2037 +0100"%0aexport GIT_COMMITTER_DATE="Wed Feb 16 14:00 2037 +0100"%0agit commit%0a(:sourceend:)%0a%0aThe code above will alter both timestamps. Amending a commit in the past is more tricky, but the [[https://git.wiki.kernel.org/index.php/GitFaq#How_can_I_tweak_the_date_of_a_commit_in_the_repo.3F | GitFAQ]] provides us with a handy bash script:%0a%0a(:source lang=bash linenum:)%0a#!/bin/sh%0a#%0a# Rewrite all branches to modify the date of one specific commit in a repo.%0a#%0a# Sample date format: Fri Jan 2 21:38:53 2009 -0800%0a# ISO8601 and RFC822 dates will also work.%0a#%0a# Note: filter-branch is picky about the commit argument. As of 1.7.0.4,%0a# a hex ID will work, the symbolic revision HEAD will fail silently,%0a# and the usability of more exotic rev specs was not tested by the author.%0a#%0a# Copyright (c) Eric S. Raymond, 2010-08-01. BSD terms apply (if anybody really thinks that this%0a# script is long and non-obvious enough to fall under copyright law).%0a#%0acommit="$1"%0adate="$2"%0agit filter-branch --env-filter \%0a    "if test \$GIT_COMMIT = '$commit'%0a     then%0a         export GIT_AUTHOR_DATE%0a         export GIT_COMMITTER_DATE%0a         GIT_AUTHOR_DATE='$date'%0a         GIT_COMMITTER_DATE='$date'%0a     fi" &&%0arm -fr "$(git rev-parse --git-dir)/refs/original/"%0a(:sourceend:)%0a%0a%0a%0a(:linkwikiwords:)%0a%0a>>comment%3c%3c%0aSummary: Working with Dates in Git - Alex Peattie Blog Post%0aTags: git%0a(:tags-hide git:)%0a(:title Working with dates in Git:)%0aSource: http://www.alexpeattie.com/blog/working-with-dates-in-git/%0aParent: (Technology.)Git%0aincludeme: [[Technology.Git]]%0aCategories:[[!Articles]]%0a>>%3c%3c%0a%0aPage saved at: Thu, 18 Oct 2012 08:09:19 -0500%0a%0a
time=1350566632
title=Working with dates in Git
author:1350566632=tamara
csum:1350566632=shorten title; moved page
diff:1350566632:1350566585:minor=159c159%0a%3c (:title Working with dates in Git:)%0a---%0a> (:title Working with dates in Git &middot; Alex Peattie, a web developer and designer.:)%0a
host:1350566632=71.63.215.130
author:1350566585=tamara
csum:1350566585=Page moved to Technology.WorkingWithDatesInGit from SavedArticles.WorkingWithDatesInGitAlexPeattieAWebDeveloperAndDesigner20121018080919
diff:1350566585:1350566558:=
host:1350566585=71.63.215.130
author:1350566558=tamara
csum:1350566558=new article
diff:1350566558:1350566558:=1,167d0%0a%3c (:nolinkwikiwords:)%0a%3c %0a%3c ! Working with dates in Git%0a%3c %0a%3c >>rframe width=25pct%3c%3c%0a%3c !!!About the author%0a%3c %0a%3c Alex Peattie is a freelance web developer &amp; designer based in the UK. He's currently available for hire, so [[http://www.alexpeattie.com/contact/ | get in touch]].%0a%3c %0a%3c !!! Get in touch%0a%3c %0a%3c [[mailto:alexpeattie@gmail.com | Email Alex]] \\%0a%3c [[http://twitter.com/alexpeattie | Follow Alex on Twitter]] \\%0a%3c [[https://github.com/alexpeattie | Follow Alex on Github]]%0a%3c >>%3c%3c%0a%3c %0a%3c When working in [[http://git-scm.com/ | git]], you most commonly trace a repository’s history using commits’ SHA-1 hashes. To revert to a previous commit, you might write something like this:%0a%3c %0a%3c (:source lang=bash:)%0a%3c git revert 883c3dc85a49d98da649%0a%3c (:sourceend:)%0a%3c %0a%3c The problem is, we tend not to think in hashes. Rather, we wonder what changes we made ''yesterday'', or remember that a now-broken piece of code worked perfectly ''a week ago''. Although we can use @@git log@@ to track down the commit we want, there has to be an easier way. Luckily git understands our human quirks, and offers us just that.%0a%3c %0a%3c !! Understanding dates in Git: author date vs. committer date &amp; ‘approxidate’%0a%3c %0a%3c There are two kinds of timestamp in git: a @@GIT_AUTHOR_DATE@@ and a @@GIT_COMMITTER_DATE@@. Although in most cases they both store the same value, they serve slightly different purposes. As the [[http://progit.org/book/ch2-3.html | Pro Git Book]] explains:%0a%3c %0a%3c ->The author is the person who originally wrote the work, whereas the committer is the person who last applied the work.%0a%3c %0a%3c So if, for instance, you send in a patch to a project, the author date will be when you made the original commit but the committer date will be when the patch was applied. Another common scenario is rebasing: rebasing will alter the commit date, but not the author date.%0a%3c %0a%3c This distinction is worth mentioning because of an inconsistency in git that [[http://cworth.org/hgbook-git/tour/ | Carl Worth points out]]:%0a%3c %0a%3c ->By default, “git log” displays author dates as “Date” but then uses commit dates when given a –since option. That seems like broken defaults to me.%0a%3c %0a%3c In other words, all the methods listed below rely on the committer date, even though you’re used to seeing the author date. As mentioned, most of the time they’ll be the same, but to see committer dates in the log just use:%0a%3c %0a%3c (:source lang=bash:)%0a%3c git log --format=fuller%0a%3c (:sourceend:)%0a%3c %0a%3c !!!! Date parsing with ‘approxidate’%0a%3c %0a%3c Git employs a kind of date parsing which will be familiar to any rubyists who’ve used [[http://chronic.rubyforge.org/ | Chronic]]. The parser, called ‘approxidate’ is very flexible, and allows both fixed dates in any format you can dream up (“10-11-1998”, “Fri Jun 4 15:46:55 2010 +0200”, “9/9/83”) and relative dates (“today”, “1 month 2 days ago”, “six minutes ago”). You can include days of the week (“last Tuesday”), timezones (“3PM GMT”) and ‘named’ times (“noon”, “tea time”).%0a%3c %0a%3c Approxidate isn’t really documented anywhere, but the [[https://github.com/git/git/blob/master/date.c | code for the parser]] is very readable, so check it out to get an idea of the kind of formats git will accept.%0a%3c %0a%3c !! log, whatchanged, –since and –until%0a%3c %0a%3c OK, so how about if we want to look at all the commits made since yesterday? All we need is the @@--since@@ option:%0a%3c %0a%3c (:source lang=bash:)%0a%3c git log --since="yesterday"%0a%3c (:sourceend:)%0a%3c %0a%3c We can also use @@--until@@ to fetch all commits up to a certain date; or of course we can use both options in tandem:%0a%3c %0a%3c (:source lang=bash:)%0a%3c git log --since="1 week ago" --until="yesterday"%0a%3c (:sourceend:)%0a%3c %0a%3c @@--since@@ and @@--until@@ can also be used with @@whatchanged@@.%0a%3c %0a%3c (:source lang=bash:)%0a%3c git whatchanged --since="1/1/2010"%0a%3c (:sourceend:)%0a%3c %0a%3c Worth noting: instead of @@--until@@ and @@--since@@ you can use @@--before@@ and @@--after@@, if that’s more your style.%0a%3c %0a%3c !! revert, diff and the @ construct%0a%3c %0a%3c Not all git commands have options like @@--since@@ and @@--until@@. So what if we wanted to revert back to our repo as it was a month ago? Luckily git provides us with a more generic way to reference commits using dates, with the @ construct:%0a%3c %0a%3c (:source lang=bash:)%0a%3c git revert master@{"1 month ago"}%0a%3c (:sourceend:)%0a%3c %0a%3c (where master is the name of the branch you’re working on).%0a%3c %0a%3c This lets us do clever things, like:%0a%3c %0a%3c (:source lang=bash:)%0a%3c git diff master@{"yesterday"} master@{"1 year 6 months ago"}%0a%3c (:sourceend:)%0a%3c %0a%3c which will compare the repo as it was yesterday, and as it was 1 year, 6 months ago.%0a%3c %0a%3c !! Change history: amending and editing dates%0a%3c %0a%3c There might be certain situations where you want to alter the timestamps git assigns to commits. There are a couple of ways that you can do this.%0a%3c %0a%3c !!!! Use @@--date@@%0a%3c %0a%3c The @@--date@@ option allows you to specify the author date that git attaches to the commit. Here we can’t use approxidate unfortunately, only fixed dates will work (YYYY.MM.DD, MM/DD/YYYY, DD.MM.YYYY, [[http://www.apps.ietf.org/rfc/rfc2822.html#sec-3.3 | RFC 2822]] and [[http://en.wikipedia.org/wiki/ISO_8601 | ISO 8601]] are all valid).%0a%3c %0a%3c (:source lang=bash:)%0a%3c git commit --date="Wed Feb 16 14:00 2037 +0100"%0a%3c (:sourceend:)%0a%3c %0a%3c We can also use @@amend@@ to change the timestamp of a previous commit:%0a%3c %0a%3c (:source lang=bash:)%0a%3c git commit --amend --date="Wed Feb 16 14:00 2037 +0100"%0a%3c (:sourceend:)%0a%3c %0a%3c Unfortunately @@--date@@ will only change the @@GIT_AUTHOR_DATE@@, not @@GIT_COMMITTER_DATE@@. If this is a problem, you may need to…%0a%3c %0a%3c !!!! Manually set @@GIT_AUTHOR_DATE@@ and @@GIT_COMMITTER_DATE@@%0a%3c %0a%3c A word of warning - overriding @@GIT_COMMITER_DATE@@ is somewhat [[http://www.kernel.org/pub/software/scm/cogito/docs/cg-commit.1.html | frowned upon]]:%0a%3c %0a%3c ->It should be never overridden, unless you know you absolutely need to override it (to ensure the commit gets the same ID as another or when migrating history around)%0a%3c %0a%3c (:source lang=bash:)%0a%3c export GIT_AUTHOR_DATE="Wed Feb 16 14:00 2037 +0100"%0a%3c export GIT_COMMITTER_DATE="Wed Feb 16 14:00 2037 +0100"%0a%3c git commit%0a%3c (:sourceend:)%0a%3c %0a%3c The code above will alter both timestamps. Amending a commit in the past is more tricky, but the [[https://git.wiki.kernel.org/index.php/GitFaq#How_can_I_tweak_the_date_of_a_commit_in_the_repo.3F | GitFAQ]] provides us with a handy bash script:%0a%3c %0a%3c (:source lang=bash linenum:)%0a%3c #!/bin/sh%0a%3c #%0a%3c # Rewrite all branches to modify the date of one specific commit in a repo.%0a%3c #%0a%3c # Sample date format: Fri Jan 2 21:38:53 2009 -0800%0a%3c # ISO8601 and RFC822 dates will also work.%0a%3c #%0a%3c # Note: filter-branch is picky about the commit argument. As of 1.7.0.4,%0a%3c # a hex ID will work, the symbolic revision HEAD will fail silently,%0a%3c # and the usability of more exotic rev specs was not tested by the author.%0a%3c #%0a%3c # Copyright (c) Eric S. Raymond, 2010-08-01. BSD terms apply (if anybody really thinks that this%0a%3c # script is long and non-obvious enough to fall under copyright law).%0a%3c #%0a%3c commit="$1"%0a%3c date="$2"%0a%3c git filter-branch --env-filter \%0a%3c     "if test \$GIT_COMMIT = '$commit'%0a%3c      then%0a%3c          export GIT_AUTHOR_DATE%0a%3c          export GIT_COMMITTER_DATE%0a%3c          GIT_AUTHOR_DATE='$date'%0a%3c          GIT_COMMITTER_DATE='$date'%0a%3c      fi" &&%0a%3c rm -fr "$(git rev-parse --git-dir)/refs/original/"%0a%3c (:sourceend:)%0a%3c %0a%3c %0a%3c %0a%3c (:linkwikiwords:)%0a%3c %0a%3c >>comment%3c%3c%0a%3c Summary: Working with Dates in Git - Alex Peattie Blog Post%0a%3c Tags: git%0a%3c (:tags-hide git:)%0a%3c (:title Working with dates in Git &middot; Alex Peattie, a web developer and designer.:)%0a%3c Source: http://www.alexpeattie.com/blog/working-with-dates-in-git/%0a%3c Parent: (Technology.)Git%0a%3c includeme: [[Technology.Git]]%0a%3c Categories:[[!Articles]]%0a%3c >>%3c%3c%0a%3c %0a%3c Page saved at: Thu, 18 Oct 2012 08:09:19 -0500%0a%3c %0a
host:1350566558=71.63.215.130
