version=pmwiki-2.2.36 ordered=1 urlencoded=1
agent=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_5_8) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19
author=ImportText
charset=ISO-8859-1
csum=(:Trail:[[Main/]] | ComputerStuff | SoftwareAndWebDevelopment \\ &lt;&lt;|JavaScript|&gt;&gt;:)
ctime=1282764409
host=127.0.0.1
name=Technology.InactivityTimeoutOnAPage
rev=10
targets=Technology.InactivityTimeoutOnAPage,Technology.JQuery,Technology.JavaScript,Technology.PHP,Technology.PHPLocalization,Technology.CSS
text=[[#excerpt]]%0aUsing JavaScript, one can construct a set of timers to schedule an inactivity timeout. Inactivity is indicated by the lack of keyboard and mouse button presses. If there is a way to indicate mouse movement, that would be useful, as well. We'll be using [[jQuery]], so look out for that, and remember to include the [[jQuery]] javascript in your code.%0a[[#excerptend]]%0a%0a%0a----%0a%0a[[#example1]]%0a!! Example 1%0aFirst, assuming we are using [[PHP]], we can set a couple of configuration variables:%0a%0a(:source lang=php linenum:)%0a // Number of milliseconds to wait before timing out the page due to inactivity %0a $page_timeout = 1000 * 60 * 30; // 30 minutes %0a $page_timeout_warning_timeout = 1000 * 30; // 30 seconds %0a(:sourceend:)%0a%0aNext, in the code that emits the header:%0a%0a(:source lang=javascript linenum tabstop=2:)%0a %3c?php if ($page_timeout > 0) { ?>%0a	var autoCloseTimer;%0a	var timeoutObject;%0a	var timePeriod = %3c?php echo $page_timeout ?>;%0a	var warnPeriod = %3c?php echo $page_timeout_warning_timeout ?>;%0a%0a	function promptForClose()%0a	{%0a	$('#autoCloseDiv').css('display','block');%0a	 autoCloseTimer = setTimeout("definitelyClose()",warnPeriod);%0a	}%0a%0a%0a	function autoClose()%0a	{%0a		//alert("auto close prompt");%0a	 $('#autoCloseDiv').css('display','block');%0a	 autoCloseTimer = setTimeout("definitelyClose()",timePeriod); //starts countdown to closure%0a	}%0a%0a	function cancelClose()%0a	{%0a		%0a	 clearTimeout(autoCloseTimer); //stops auto-close timer%0a	 $('#autoCloseDiv').css('display','none'); //hides message%0a	//alert("canceled close");%0a	}%0a%0a	function resetTimeout()%0a	{%0a		//alert("timer reset");%0a	  clearTimeout(timeoutObject); //stops timer%0a	  timeoutObject = setTimeout("promptForClose()",timePeriod); //restarts timer from 0%0a	}%0a%0a%0a	function definitelyClose() {%0a		//alert("logging off")%0a	    location.href="logoff.php"; // for example, log the user off if inactive%0a	}%0a %3c?php } // close if ($page_timeout) ?> %0a(:sourceend:)%0a%0aNext, we need to set the @@%3cbody>@@ tags appropriately:%0a%0a(:source lang=html4strict linenum:)%0a %3cbody onLoad ="timeoutObject=setTimeout('promptForClose()',timePeriod);"%3c?php%0a		// only set the triggers if a user is logged in%0a		if ($page_timeout > 0): ?> %0a		onkeydown='resetTimeout();' onmousedown='resetTimeout();'%0a		%3c?php endif: ?>>%0a(:sourceend:)%0a%0aFinally, we create a @@%3cdiv>@@ in the @@%3cbody>@@ of the document to serve as our pop-up indicator that the session is closing:%0a%0a(:source lang=html4strict linenum:)%0a	%3cdiv id='autoCloseDiv' style="display:none;">%0a		%3ch3>%3c?php echo get_vocab('inactivitywarning') ?>%3c/h3>%0a		%3cp>%3c?php echo get_vocab('warningmessage') ?>%3c/p>%0a		%3cdiv class="submit_buttons">%0a		%3cinput type='button' value='%3c?php echo get_vocab('closebutton') ?>' onclick='definitelyClose();' />%0a		%3cinput type='button' value='%3c?php echo get_vocab('cancelbutton') ?>' onclick='cancelClose();' />%0a		%3c/div>%0a	%3c/div>%0a(:sourceend:)%0a%0a''Note use of language substitution function @@get_vocab()@@. This is done with [[PHPLocalization]].''%0a%0aIn addition, the following [[CSS]] is useful for displaying the @@autoCloseDiv@@:%0a%0a(:source lang=css linenum:)%0a #autoCloseDiv {%0a	 background-color: #FFF;%0a	color: #000 %0a	margin-left: -100px;%0a	margin-top: -100px; %0a	width: 200px; %0a	height: 200px; %0a	position: absolute; %0a	top: 50%25; %0a	left: 50%25; %0a	text-align: center; %0a	border: 1px solid #999;%0a }%0a(:sourceend:)%0a%0a'''Edit:''' Turns out there is a mouse movement event handler. jQuery example of such is shown at [[http://api.jquery.com/mousemove/ | jQuery mousemove handler]]. So for the above example, adding the following should suffice:%0a%0a(:source lang=html4strict linenum:)%0a  %3cscript>%0a    $("body").mousemove(resetTimeout());%0a  %3c/script>%0a(:sourceend:)%0a%0a----%0a%0a[[#example2]]%0a!! Example 2%0a%0aThis is a more complete [[jQuery]] UI example. Here, I've recast the functions as anonymous functions assigned to variables, so they can be used in assignments to the jQuery callbacks. Also, not that everything that is needed by the code inside the $(document).ready function must reside within that function's scope. If you access something outside that scope, the [[jQuery]] UI functions will fail, and you'll get very odd results. Also, there is additional code below that will reset the timeout functions once in the logged-off state.%0a%0a(:source lang=javascript linenum:)%0a %3cscript type="text/javascript" charset="utf-8">%0a /* %3c![CDATA[ */ %0a $(function(){%0a	var autoCloseTimer;%0a	var timeoutObject;%0a	var timePeriod = 5 * 1000;  // n * 1000 - number of seconds until timeout%0a	var warnPeriod = 5 * 1000; // n * 1000 - number of seconds to show warning before timing out%0a%0a	var promptForClose = function()%0a	{%0a		$('#autoCloseDiv').dialog('open');%0a		autoCloseTimer = setTimeout(definitelyClose,warnPeriod);%0a	}%0a%0a	var cancelClose = function()%0a	{%0a		$('#autoCloseDiv').dialog('close'); //hides message%0a		clearTimeout(autoCloseTimer); //stops auto-close timer%0a		resetTimeout();%0a	}%0a%0a	var  resetTimeout = function()%0a	{%0a		clearTimeout(timeoutObject); //stops timer%0a		if (timePeriod > 0) {%0a			timeoutObject = setTimeout(promptForClose,timePeriod); //restarts timer from 0%0a		}%0a	}%0a%0a%0a	var definitelyClose = function() {%0a		clearTimeout(autoCloseTimer);%0a		$('#autoCloseDiv').dialog('close');%0a		timePeriod = 0;%0a		$("#junk-text").hide('slow');%0a		$("#logged-off").show('slow');%0a	}%0a%0a	$("#logged-off").hide();%0a	$("#logged-off").text("Logged off - click to reset");%0a	$("#logged-off").addClass('ui-state-highlight');%0a	$("#logged-off").addClass('ui-corner-all');%0a	$("#logged-off").css({'width' : '100px', 'text-align' : 'center'});%0a	$("#logged-off").attr('title','click to reset');%0a	$("#logged-off").click(function(){%0a		timePeriod = 5 * 1000;%0a		resetTimeout();%0a		$(this).hide('slide');%0a		$("#junk-text").show('slow');%0a                return false; // prevent anything else from happenning%0a	});%0a	%0a	$('#inactivitytimeout').click(resetTimeout);%0a	$('#inactivitytimeout').keypress(resetTimeout);%0a	$('#topnav a:first-child').focus(); // must provide a focus on the body for something to accept a keydown event%0a%0a	resetTimeout();%0a	var warnSeconds = warnPeriod / 1000;%0a	$("#warn-seconds").text(warnSeconds);%0a	$("#autoCloseDiv").dialog({%0a		autoOpen: false,%0a		buttons: {%0a			'Log off' : definitelyClose,%0a			'Continue' : cancelClose%0a		}%0a	});%0a%0a })%0a	%0a /* ]]> */%0a %3c/script>%0a(:sourceend:)%0a%0aThe page body would have:%0a%0a(:source lang=html4strict linenum:)%0a %3cbody id="inactivitytimeout" title="inactivitytimeout" lang="en-US">%0a	%3cdiv id="autoCloseDiv" title="Warning!" style="display: block">%0a		%3cspan class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;">%3c/span>%0a		Session will close in %3cspan id="warn-seconds">%3c/span> seconds.%0a	%3c/div>%0a%0a %3cdiv id="topnav">%3ca href="#">%3c/a>%3c/div>%0a %3cdiv id="content">%0a %3cp id="junk-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum sem dui, laoreet ut scelerisque quis, dictum vitae nisi. Nulla facilisi. Nunc a turpis sed lectus hendrerit pulvinar at vel sapien. Vivamus placerat auctor iaculis. Nam gravida gravida felis, in viverra eros vehicula at. Praesent vulputate blandit lectus, ut scelerisque erat laoreet auctor. Maecenas blandit pharetra nisl, sit amet pretium lorem congue non. Praesent dignissim, lectus nec tristique lobortis, felis metus placerat risus, id fermentum lectus nisl id mauris. Nullam viverra accumsan massa eget congue. Nam neque lacus, tempus vel fringilla eget, molestie dapibus diam. Proin sapien est, luctus vitae congue eget, ultricies a enim. %3c/p>%0a %3cp id="logged-off">%3c/p>%0a %3c/div>%0a(:sourceend:)%0a%0a%0a(:Summary:How to implement an inactivity timeout on a web page:)%0a(:Parent:(Technology.)JavaScript:)%0a(:IncludeMe:[[(Technology.)JavaScript]]:)%0a(:Categories:[[!HowTos]]:)%0a(:Tags: javascript, jquery:)%0a(:tags-hide javascript, jquery :)%0a
time=1334714369
author:1334714369=ImportText
diff:1334714369:1317705224:=1c1,10%0a%3c [[#excerpt]]%0a---%0a> (:Summary:How to implement an inactivity timeout on a web page:)%0a> (:Trail:[[Main/]] | ComputerStuff | SoftwareAndWebDevelopment \\%0a> %3c%3c|JavaScript|>>:)%0a> %0a> >>rframe%3c%3c%0a> Page Contents%0a> *[[#example1|Example 1]]%0a> *[[#example2|Example 2]]%0a> >>%3c%3c%0a> %0a3,5c12%0a%3c [[#excerptend]]%0a%3c %0a%3c %0a---%0a> %0a213,218c220,223%0a%3c (:Summary:How to implement an inactivity timeout on a web page:)%0a%3c (:Parent:(Technology.)JavaScript:)%0a%3c (:IncludeMe:[[(Technology.)JavaScript]]:)%0a%3c (:Categories:[[!HowTos]]:)%0a%3c (:Tags: javascript, jquery:)%0a%3c (:tags-hide javascript, jquery :)%0a---%0a> %25categories%25 '''Categories:''' [[!ComputerStuff]]%0a> %0a> %25tags%25 '''Tags:''' (:tags javascript, jquery, jquery ui, programming, languages:)%0a> %0a
host:1334714369=127.0.0.1
author:1317705224=tamara
diff:1317705224:1317702691:=2,3c2,4%0a%3c (:Trail:[[Main/]] | ComputerStuff | SoftwareAndWebDevelopment \\%0a%3c %3c%3c|JavaScript|>>:)%0a---%0a> %0a> %25trail%25 [[Main/]] | ComputerStuff | SoftwareAndWebDevelopment \\%0a> %3c%3c|JavaScript|>>%0a
host:1317705224=71.63.211.0
author:1317702691=tamara
csum:1317702691=clean up formating, wikistyles, trails, etc
diff:1317702691:1289640969:minor=2,11c2,6%0a%3c %0a%3c %25trail%25 [[Main/]] | ComputerStuff | SoftwareAndWebDevelopment \\%0a%3c %3c%3c|JavaScript|>>%0a%3c %0a%3c >>rframe%3c%3c%0a%3c Page Contents%0a%3c *[[#example1|Example 1]]%0a%3c *[[#example2|Example 2]]%0a%3c >>%3c%3c%0a%3c %0a---%0a> [[%3c%3c]]%0a> %25rframe%25 %3c%3c|SoftwareAndWebDevelopment|>>%0a> [[%3c%3c]]%0a> %0a> %25rframe%25 Table of Contents [[%3c%3c]] [[#example1|Example 1]] [[%3c%3c]] [[#example2|Example 2]]%0a221,224c216%0a%3c %25categories%25 '''Categories:''' [[!ComputerStuff]]%0a%3c %0a%3c %25tags%25 '''Tags:''' (:tags javascript, jquery, jquery ui, programming, languages:)%0a%3c %0a---%0a> %25rframe%25 '''Categories:''' [[!ComputerStuff]]%0a
host:1317702691=71.63.211.0
author:1289640969=tamara
csum:1289640969=wrap source code in source formatting
diff:1289640969:1283144419:=15d14%0a%3c (:source lang=php linenum:)%0a19,20c18%0a%3c (:sourceend:)%0a%3c %0a---%0a> %0a23d20%0a%3c (:source lang=javascript linenum tabstop=2:)%0a65,66c62%0a%3c (:sourceend:)%0a%3c %0a---%0a> %0a69d64%0a%3c (:source lang=html4strict linenum:)%0a72,76c67,68%0a%3c 		if ($page_timeout > 0): ?> %0a%3c 		onkeydown='resetTimeout();' onmousedown='resetTimeout();'%0a%3c 		%3c?php endif: ?>>%0a%3c (:sourceend:)%0a%3c %0a---%0a> 		($page_timeout > 0 ? " onkeydown='resetTimeout();' onmousedown='resetTimeout();' : "") ?>>%0a> %0a79d70%0a%3c (:source lang=html4strict linenum:)%0a88,89c79%0a%3c (:sourceend:)%0a%3c %0a---%0a> %0a94d83%0a%3c (:source lang=css linenum:)%0a108,109c97%0a%3c (:sourceend:)%0a%3c %0a---%0a> %0a112d99%0a%3c (:source lang=html4strict linenum:)%0a116,117c103%0a%3c (:sourceend:)%0a%3c %0a---%0a> %0a125d110%0a%3c (:source lang=javascript linenum:)%0a197,201c182,186%0a%3c (:sourceend:)%0a%3c %0a%3c The page body would have:%0a%3c %0a%3c (:source lang=html4strict linenum:)%0a---%0a> %0a> %0a> 	%0a>  %3c/head>%0a> %0a213c198%0a%3c (:sourceend:)%0a---%0a> %0a
host:1289640969=71.63.211.0
author:1283144419=tamara
diff:1283144419:1283143927:=160d159%0a%3c                 return false; // prevent anything else from happenning%0a
host:1283144419=71.63.211.0
author:1283143927=tamara
csum:1283143927=add a second jquery ui example that is more completely jquery ui
diff:1283143927:1282798862:=6d5%0a%3c %25rframe%25 Table of Contents [[%3c%3c]] [[#example1|Example 1]] [[%3c%3c]] [[#example2|Example 2]]%0a9,12d7%0a%3c ----%0a%3c %0a%3c [[#example1]]%0a%3c !! Example 1%0a98,99c93,96%0a%3c '''Edit:''' Turns out there is a mouse movement event handler. jQuery example of such is shown at [[http://api.jquery.com/mousemove/ | jQuery mousemove handler]]. So for the above example, adding the following should suffice:%0a%3c %0a---%0a> *Edit:*%0a> %0a> Turns out there is a mouse movement event handler. jQuery example of such is shown at [[http://api.jquery.com/mousemove/ | jQuery mousemove handler]]. So for the above example, adding the following should suffice:%0a> %0a103,196d99%0a%3c %0a%3c ----%0a%3c %0a%3c [[#example2]]%0a%3c !! Example 2%0a%3c %0a%3c This is a more complete [[jQuery]] UI example. Here, I've recast the functions as anonymous functions assigned to variables, so they can be used in assignments to the jQuery callbacks. Also, not that everything that is needed by the code inside the $(document).ready function must reside within that function's scope. If you access something outside that scope, the [[jQuery]] UI functions will fail, and you'll get very odd results. Also, there is additional code below that will reset the timeout functions once in the logged-off state.%0a%3c %0a%3c  %3cscript type="text/javascript" charset="utf-8">%0a%3c  /* %3c![CDATA[ */ %0a%3c  $(function(){%0a%3c 	var autoCloseTimer;%0a%3c 	var timeoutObject;%0a%3c 	var timePeriod = 5 * 1000;  // n * 1000 - number of seconds until timeout%0a%3c 	var warnPeriod = 5 * 1000; // n * 1000 - number of seconds to show warning before timing out%0a%3c %0a%3c 	var promptForClose = function()%0a%3c 	{%0a%3c 		$('#autoCloseDiv').dialog('open');%0a%3c 		autoCloseTimer = setTimeout(definitelyClose,warnPeriod);%0a%3c 	}%0a%3c %0a%3c 	var cancelClose = function()%0a%3c 	{%0a%3c 		$('#autoCloseDiv').dialog('close'); //hides message%0a%3c 		clearTimeout(autoCloseTimer); //stops auto-close timer%0a%3c 		resetTimeout();%0a%3c 	}%0a%3c %0a%3c 	var  resetTimeout = function()%0a%3c 	{%0a%3c 		clearTimeout(timeoutObject); //stops timer%0a%3c 		if (timePeriod > 0) {%0a%3c 			timeoutObject = setTimeout(promptForClose,timePeriod); //restarts timer from 0%0a%3c 		}%0a%3c 	}%0a%3c %0a%3c %0a%3c 	var definitelyClose = function() {%0a%3c 		clearTimeout(autoCloseTimer);%0a%3c 		$('#autoCloseDiv').dialog('close');%0a%3c 		timePeriod = 0;%0a%3c 		$("#junk-text").hide('slow');%0a%3c 		$("#logged-off").show('slow');%0a%3c 	}%0a%3c %0a%3c 	$("#logged-off").hide();%0a%3c 	$("#logged-off").text("Logged off - click to reset");%0a%3c 	$("#logged-off").addClass('ui-state-highlight');%0a%3c 	$("#logged-off").addClass('ui-corner-all');%0a%3c 	$("#logged-off").css({'width' : '100px', 'text-align' : 'center'});%0a%3c 	$("#logged-off").attr('title','click to reset');%0a%3c 	$("#logged-off").click(function(){%0a%3c 		timePeriod = 5 * 1000;%0a%3c 		resetTimeout();%0a%3c 		$(this).hide('slide');%0a%3c 		$("#junk-text").show('slow');%0a%3c 	});%0a%3c 	%0a%3c 	$('#inactivitytimeout').click(resetTimeout);%0a%3c 	$('#inactivitytimeout').keypress(resetTimeout);%0a%3c 	$('#topnav a:first-child').focus(); // must provide a focus on the body for something to accept a keydown event%0a%3c %0a%3c 	resetTimeout();%0a%3c 	var warnSeconds = warnPeriod / 1000;%0a%3c 	$("#warn-seconds").text(warnSeconds);%0a%3c 	$("#autoCloseDiv").dialog({%0a%3c 		autoOpen: false,%0a%3c 		buttons: {%0a%3c 			'Log off' : definitelyClose,%0a%3c 			'Continue' : cancelClose%0a%3c 		}%0a%3c 	});%0a%3c %0a%3c  })%0a%3c 	%0a%3c  /* ]]> */%0a%3c  %3c/script>%0a%3c %0a%3c %0a%3c 	%0a%3c  %3c/head>%0a%3c %0a%3c  %3cbody id="inactivitytimeout" title="inactivitytimeout" lang="en-US">%0a%3c 	%3cdiv id="autoCloseDiv" title="Warning!" style="display: block">%0a%3c 		%3cspan class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;">%3c/span>%0a%3c 		Session will close in %3cspan id="warn-seconds">%3c/span> seconds.%0a%3c 	%3c/div>%0a%3c %0a%3c  %3cdiv id="topnav">%3ca href="#">%3c/a>%3c/div>%0a%3c  %3cdiv id="content">%0a%3c  %3cp id="junk-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum sem dui, laoreet ut scelerisque quis, dictum vitae nisi. Nulla facilisi. Nunc a turpis sed lectus hendrerit pulvinar at vel sapien. Vivamus placerat auctor iaculis. Nam gravida gravida felis, in viverra eros vehicula at. Praesent vulputate blandit lectus, ut scelerisque erat laoreet auctor. Maecenas blandit pharetra nisl, sit amet pretium lorem congue non. Praesent dignissim, lectus nec tristique lobortis, felis metus placerat risus, id fermentum lectus nisl id mauris. Nullam viverra accumsan massa eget congue. Nam neque lacus, tempus vel fringilla eget, molestie dapibus diam. Proin sapien est, luctus vitae congue eget, ultricies a enim. %3c/p>%0a%3c  %3cp id="logged-off">%3c/p>%0a%3c  %3c/div>%0a
host:1283143927=71.63.211.0
author:1282798862=tamara
diff:1282798862:1282798607:minor=103c103%0a%3c %25rframe%25 '''Categories:''' [[!ComputerStuff]]%0a---%0a> %25rframe%25 '''Categories:''' [[!Computers]]%0a
host:1282798862=71.63.211.0
author:1282798607=tamara
csum:1282798607=add mousemove snippet
diff:1282798607:1282764437:=92,100d91%0a%3c %0a%3c *Edit:*%0a%3c %0a%3c Turns out there is a mouse movement event handler. jQuery example of such is shown at [[http://api.jquery.com/mousemove/ | jQuery mousemove handler]]. So for the above example, adding the following should suffice:%0a%3c %0a%3c   %3cscript>%0a%3c     $("body").mousemove(resetTimeout());%0a%3c   %3c/script>%0a%3c %0a
host:1282798607=71.63.211.0
author:1282764437=tamara
diff:1282764437:1282764409:minor=2d1%0a%3c [[%3c%3c]]%0a
host:1282764437=71.63.211.0
author:1282764409=tamara
csum:1282764409=new page
diff:1282764409:1282764409:=1,93d0%0a%3c (:Summary:How to implement an inactivity timeout on a web page:)%0a%3c %25rframe%25 %3c%3c|SoftwareAndWebDevelopment|>>%0a%3c [[%3c%3c]]%0a%3c %0a%3c Using JavaScript, one can construct a set of timers to schedule an inactivity timeout. Inactivity is indicated by the lack of keyboard and mouse button presses. If there is a way to indicate mouse movement, that would be useful, as well. We'll be using [[jQuery]], so look out for that, and remember to include the [[jQuery]] javascript in your code.%0a%3c %0a%3c First, assuming we are using [[PHP]], we can set a couple of configuration variables:%0a%3c %0a%3c  // Number of milliseconds to wait before timing out the page due to inactivity %0a%3c  $page_timeout = 1000 * 60 * 30; // 30 minutes %0a%3c  $page_timeout_warning_timeout = 1000 * 30; // 30 seconds %0a%3c %0a%3c Next, in the code that emits the header:%0a%3c %0a%3c  %3c?php if ($page_timeout > 0) { ?>%0a%3c 	var autoCloseTimer;%0a%3c 	var timeoutObject;%0a%3c 	var timePeriod = %3c?php echo $page_timeout ?>;%0a%3c 	var warnPeriod = %3c?php echo $page_timeout_warning_timeout ?>;%0a%3c %0a%3c 	function promptForClose()%0a%3c 	{%0a%3c 	$('#autoCloseDiv').css('display','block');%0a%3c 	 autoCloseTimer = setTimeout("definitelyClose()",warnPeriod);%0a%3c 	}%0a%3c %0a%3c %0a%3c 	function autoClose()%0a%3c 	{%0a%3c 		//alert("auto close prompt");%0a%3c 	 $('#autoCloseDiv').css('display','block');%0a%3c 	 autoCloseTimer = setTimeout("definitelyClose()",timePeriod); //starts countdown to closure%0a%3c 	}%0a%3c %0a%3c 	function cancelClose()%0a%3c 	{%0a%3c 		%0a%3c 	 clearTimeout(autoCloseTimer); //stops auto-close timer%0a%3c 	 $('#autoCloseDiv').css('display','none'); //hides message%0a%3c 	//alert("canceled close");%0a%3c 	}%0a%3c %0a%3c 	function resetTimeout()%0a%3c 	{%0a%3c 		//alert("timer reset");%0a%3c 	  clearTimeout(timeoutObject); //stops timer%0a%3c 	  timeoutObject = setTimeout("promptForClose()",timePeriod); //restarts timer from 0%0a%3c 	}%0a%3c %0a%3c %0a%3c 	function definitelyClose() {%0a%3c 		//alert("logging off")%0a%3c 	    location.href="logoff.php"; // for example, log the user off if inactive%0a%3c 	}%0a%3c  %3c?php } // close if ($page_timeout) ?> %0a%3c %0a%3c Next, we need to set the @@%3cbody>@@ tags appropriately:%0a%3c %0a%3c  %3cbody onLoad ="timeoutObject=setTimeout('promptForClose()',timePeriod);"%3c?php%0a%3c 		// only set the triggers if a user is logged in%0a%3c 		($page_timeout > 0 ? " onkeydown='resetTimeout();' onmousedown='resetTimeout();' : "") ?>>%0a%3c %0a%3c Finally, we create a @@%3cdiv>@@ in the @@%3cbody>@@ of the document to serve as our pop-up indicator that the session is closing:%0a%3c %0a%3c 	%3cdiv id='autoCloseDiv' style="display:none;">%0a%3c 		%3ch3>%3c?php echo get_vocab('inactivitywarning') ?>%3c/h3>%0a%3c 		%3cp>%3c?php echo get_vocab('warningmessage') ?>%3c/p>%0a%3c 		%3cdiv class="submit_buttons">%0a%3c 		%3cinput type='button' value='%3c?php echo get_vocab('closebutton') ?>' onclick='definitelyClose();' />%0a%3c 		%3cinput type='button' value='%3c?php echo get_vocab('cancelbutton') ?>' onclick='cancelClose();' />%0a%3c 		%3c/div>%0a%3c 	%3c/div>%0a%3c %0a%3c ''Note use of language substitution function @@get_vocab()@@. This is done with [[PHPLocalization]].''%0a%3c %0a%3c In addition, the following [[CSS]] is useful for displaying the @@autoCloseDiv@@:%0a%3c %0a%3c  #autoCloseDiv {%0a%3c 	 background-color: #FFF;%0a%3c 	color: #000 %0a%3c 	margin-left: -100px;%0a%3c 	margin-top: -100px; %0a%3c 	width: 200px; %0a%3c 	height: 200px; %0a%3c 	position: absolute; %0a%3c 	top: 50%25; %0a%3c 	left: 50%25; %0a%3c 	text-align: center; %0a%3c 	border: 1px solid #999;%0a%3c  }%0a%3c %0a%3c %0a%3c %25rframe%25 '''Categories:''' [[!Computers]]%0a
host:1282764409=71.63.211.0
